<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>React 笔记 | 雪荷的博客</title><meta name="author" content="雪荷"><meta name="copyright" content="雪荷"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、React 基础1. 创建一个 react 项目1.利用 create-react-app 工具创建一个 react 项目 12npx create-react-app project-namenpm start # 启动项目  2.src 目录只保留 App.js 和 index.js 文件 3.精简 App.js 和 index.js 文件 1.1 src 目录下文件的作用index.js">
<meta property="og:type" content="article">
<meta property="og:title" content="React 笔记">
<meta property="og:url" content="http://example.com/2024/07/06/React-%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="雪荷的博客">
<meta property="og:description" content="一、React 基础1. 创建一个 react 项目1.利用 create-react-app 工具创建一个 react 项目 12npx create-react-app project-namenpm start # 启动项目  2.src 目录只保留 App.js 和 index.js 文件 3.精简 App.js 和 index.js 文件 1.1 src 目录下文件的作用index.js">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/post_2.png">
<meta property="article:published_time" content="2024-07-06T06:16:22.000Z">
<meta property="article:modified_time" content="2024-09-05T13:00:39.976Z">
<meta property="article:author" content="雪荷">
<meta property="article:tag" content="React">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/post_2.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/07/06/React-%E7%AC%94%E8%AE%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'React 笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-05 21:00:39'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/modify.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/ava.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">40</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/post_2.png')"><nav id="nav"><span id="blog-info"><a href="/" title="雪荷的博客"><span class="site-name">雪荷的博客</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">React 笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-06T06:16:22.000Z" title="发表于 2024-07-06 14:16:22">2024-07-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-05T13:00:39.976Z" title="更新于 2024-09-05 21:00:39">2024-09-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="React 笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><div class="top-img" style="background-image: url('/img/post_2.png');"></div><article class="post-content" id="article-container"><h1 id="一、React-基础"><a href="#一、React-基础" class="headerlink" title="一、React 基础"></a>一、React 基础</h1><h2 id="1-创建一个-react-项目"><a href="#1-创建一个-react-项目" class="headerlink" title="1. 创建一个 react 项目"></a>1. 创建一个 react 项目</h2><p>1.利用 create-react-app 工具创建一个 react 项目</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app project-name</span><br><span class="line">npm start <span class="comment"># 启动项目</span></span><br></pre></td></tr></tbody></table></figure>

<p>2.src 目录只保留 App.js 和 index.js 文件</p>
<p>3.精简 App.js 和 index.js 文件</p>
<h3 id="1-1-src-目录下文件的作用"><a href="#1-1-src-目录下文件的作用" class="headerlink" title="1.1 src 目录下文件的作用"></a>1.1 src 目录下文件的作用</h3><p>index.js 是项目的入口，从这里开始运行，App 是根组件被 Index.js 导入，最后渲染到 index.html 中 root 节点上</p>
<p>index.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 项目的核心入口 从这里开始运行</span><br><span class="line"></span><br><span class="line">// React 必要的两个核心包</span><br><span class="line">import React from 'react';</span><br><span class="line">import ReactDOM from 'react-dom/client';</span><br><span class="line"></span><br><span class="line">// 导入项目的根组件</span><br><span class="line">import App from './App';</span><br><span class="line"></span><br><span class="line">// 把 App 根组件渲染到 id 为 root 的 dom 节点上</span><br><span class="line">const root = ReactDOM.createRoot(document.getElementById('root'));</span><br><span class="line">root.render(</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p>App：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line"></span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line">function App() {</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">      this is React App</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="2-jsx-基础-概念和本质"><a href="#2-jsx-基础-概念和本质" class="headerlink" title="2. jsx 基础-概念和本质"></a>2. jsx 基础-概念和本质</h2><h3 id="2-1-JSX-是什么？"><a href="#2-1-JSX-是什么？" class="headerlink" title="2.1 JSX 是什么？"></a>2.1 JSX 是什么？</h3><p>JSX 表示在 JS 代码中编写 HTML 模板结构，是 React 中编写 UI 模板的方式</p>
<p><strong>优势：</strong></p>
<ol>
<li>HTML 的声明式模板写法</li>
<li>JS 的可编程能力</li>
</ol>
<p>JSX 是 JS 的拓展，浏览器不可直接识别，需要解析工具解析才可识别</p>
<h3 id="2-2-JSX-编写-JS-代码"><a href="#2-2-JSX-编写-JS-代码" class="headerlink" title="2.2 JSX 编写 JS 代码"></a>2.2 JSX 编写 JS 代码</h3><p>在 jsx 中可通过<strong>大括号 {} 识别 js 表达式</strong>，比如常见的变量、函数调用、方法调用等等</p>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">function getName() {</span><br><span class="line">    return 'jack';</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">const count = 100;</span><br><span class="line">function App() {</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">      this is React App</span><br><span class="line">        {/*1. 引号传递字符串*/}</span><br><span class="line">        {'this is message'}</span><br><span class="line">        {/*2. 识别 js 变量*/}</span><br><span class="line">        {count}</span><br><span class="line">        {/*3. 函数调用*/}</span><br><span class="line">        { getName() }</span><br><span class="line">        {/*4. 方法调用*/}</span><br><span class="line">        {new Date().getDate()}</span><br><span class="line">        {/*5. 使用 js 对象*/}</span><br><span class="line">        &lt;div style={{ color: 'red' }}&gt;this is div&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-3-JSX-中实现列表渲染"><a href="#2-3-JSX-中实现列表渲染" class="headerlink" title="2.3 JSX 中实现列表渲染"></a>2.3 JSX 中实现列表渲染</h3><p>提示：在 JSX 中可以使用原生 JS 中 map 方法遍历渲染列表</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">const count = 100;</span><br><span class="line"></span><br><span class="line">const list = [</span><br><span class="line">    {id: 1001, name: 'Vue'},</span><br><span class="line">    {id: 1002, name: 'React'},</span><br><span class="line">    {id: 1003, name: 'Angular'},</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        this is App</span><br><span class="line">        {/*渲染列表*/}</span><br><span class="line">        {list.map(item =&gt; &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;)}</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>注意：</p>
<ol>
<li>渲染哪个结构就 return 那个</li>
<li>循环渲染记得要加上独一无二的 key（类型为 string 或 number）</li>
</ol>
<h3 id="2-4-JSX-实现条件渲染"><a href="#2-4-JSX-实现条件渲染" class="headerlink" title="2.4 JSX 实现条件渲染"></a>2.4 JSX 实现条件渲染</h3><p>在 React 中，可以通过<strong>逻辑与运算符 &amp;&amp;、三元表达式（?:）</strong>实现*<em>基础的条件渲染</em></p>
<p>类似 Vue 的 v-if</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">const isLogin = true;</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        {/*1. 逻辑与 &amp;&amp;*/}</span><br><span class="line">        {isLogin &amp;&amp; &lt;span&gt;this is span&lt;/span&gt;}</span><br><span class="line">        &lt;br/&gt;</span><br><span class="line">        {/*2. 三元运算*/}</span><br><span class="line">        {isLogin ? &lt;span&gt;is Login&lt;/span&gt; : &lt;span&gt;not Login&lt;/span&gt;}</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240706153914.png" alt="image-20240706153914830"></p>
<h4 id="2-4-1-JSX-条件渲染的-demo"><a href="#2-4-1-JSX-条件渲染的-demo" class="headerlink" title="2.4.1 JSX 条件渲染的 demo"></a>2.4.1 JSX 条件渲染的 demo</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">const articleType = 3; // 0 1 3 'articleType' 的取值范围</span><br><span class="line"></span><br><span class="line">// 定义核心函数（根据文章类型返回不同的 JSX 模板）</span><br><span class="line">function getArticleTemplate() {</span><br><span class="line">    if (articleType === 0) {</span><br><span class="line">        return &lt;div&gt;我是图文文章&lt;/div&gt;</span><br><span class="line">    } else if (articleType === 1) {</span><br><span class="line">        return &lt;div&gt;我是单图文章&lt;/div&gt;</span><br><span class="line">    } else {</span><br><span class="line">        return &lt;div&gt;我是三图文章&lt;/div&gt;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        {/*调用函数渲染不同模板*/}</span><br><span class="line">        {getArticleTemplate()}</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p>显示：我是三图文章</p>
<h2 id="3-React-基础事件绑定"><a href="#3-React-基础事件绑定" class="headerlink" title="3. React 基础事件绑定"></a>3. React 基础事件绑定</h2><p><strong>语法</strong>：on + 事件名 = {事件处理程序/函数名}，遵循驼峰命令</p>
<p>1.绑定事件</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">    const handleClick = () =&gt; {</span><br><span class="line">        console.log('button 被点击了');</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        &lt;button onClick={handleClick}&gt;click me&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p>2.<strong>传递事件参数 e</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">    // 拿到事件参数 e</span><br><span class="line">    const handleClick = (e) =&gt; {</span><br><span class="line">        console.log('button 被点击了', e);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        &lt;button onClick={handleClick}&gt;click me&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p>3.<strong>传递自定义参数</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">	</span><br><span class="line">    // 传递自定义参数</span><br><span class="line">    const handleClick = (name) =&gt; {</span><br><span class="line">        console.log('button 被点击了', name);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        {/*箭头函数传参*/}</span><br><span class="line">        &lt;button onClick={() =&gt; handleClick('jack')}&gt;click me&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>4.<strong>同时传递自定义参数和事件参数 e</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">    // const handleClick = () =&gt; {</span><br><span class="line">    //     console.log('button 被点击了');</span><br><span class="line">    // }</span><br><span class="line"></span><br><span class="line">    // 拿到事件参数 e</span><br><span class="line">    // const handleClick = (e) =&gt; {</span><br><span class="line">    //     console.log('button 被点击了', e);</span><br><span class="line">    // }</span><br><span class="line"></span><br><span class="line">    const handleClick = (name, e) =&gt; {</span><br><span class="line">        console.log('button 被点击了', name, e);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        {/*箭头函数传参*/}</span><br><span class="line">        &lt;button onClick={(e) =&gt; handleClick('jack', e)}&gt;click me&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240706160509.png" alt="image-20240706160509512"></p>
<h2 id="4-React组件"><a href="#4-React组件" class="headerlink" title="4.  React组件"></a>4.  React组件</h2><p>在 React 中，一个组件就是<strong>一个首字母大写的函数</strong>，内部含有组件的逻辑和 UI，渲染组件只需<strong>将组件当做标签书写即可</strong></p>
<p>1.定义组件（function 定义或者箭头函数）</p>
<p>App.js：</p>
<figure class="highlight typescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="comment">// 组件逻辑</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Button</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">    <span class="comment">// 组件逻辑</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2.渲染组件（自闭和或成对标签）</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) {</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"App"</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        {/*自闭和*/}</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        {/*成对标签*/}</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span>&gt;</span><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="5-useState-基础使用"><a href="#5-useState-基础使用" class="headerlink" title="5. useState 基础使用"></a>5. useState 基础使用</h2><p>其是 React 的一个 Hook，<strong>允许我们向组件添加一个状态变量</strong>，从而控制影响组件的渲染结果</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>count 的值不可直接修改，只能通过 setCount 修改</p>
<p>本质：状态变量一旦发生变化组件的视图 UI 也会变化（<strong>数据驱动视图</strong>）</p>
<p><strong>特点：</strong></p>
<ol>
<li>useState 是一个函数，返回值是一个数组</li>
<li>数组的第一个参数是状态变量，第二个参数是 set 函数用来修改状态变量</li>
<li>useState 的参数将作为 count 的初始值</li>
</ol>
<h3 id="一个-useState-的小-demo"><a href="#一个-useState-的小-demo" class="headerlink" title="一个 useState 的小 demo"></a>一个 useState 的小 demo</h3><p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">// useState 实现一个计数器按钮</span><br><span class="line">import {useState} from "react";</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">    // 1. 调用 useState 添加一个状态变量</span><br><span class="line">    // count 状态变量</span><br><span class="line">    // setCount 修改状态变量</span><br><span class="line">    const [count, setCount] = useState(0);</span><br><span class="line"></span><br><span class="line">    // 2. 点击按钮的回调</span><br><span class="line">    const handleClick = () =&gt; {</span><br><span class="line">        // 作用：1.用传入的新值修改 count</span><br><span class="line">        // 2.重新使用新的 count 渲染 UI</span><br><span class="line">        setCount(count + 1);</span><br><span class="line">    };</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        &lt;button onClick={handleClick}&gt;{count}&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="拓展-demo"><a href="#拓展-demo" class="headerlink" title="拓展 demo"></a>拓展 demo</h3><p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">// useState 实现一个计数器按钮</span><br><span class="line">import {useState} from "react";</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">    // 修改对象</span><br><span class="line">    const [form, setForm] = useState({name: 'jack'});</span><br><span class="line"></span><br><span class="line">    const changeForm = () =&gt; {</span><br><span class="line">        // 错误写法：直接修改</span><br><span class="line">        // form.name = 'john';</span><br><span class="line">        // 正确写法：setForm 传入一个全新的对象</span><br><span class="line">        setForm({</span><br><span class="line">            ...form,</span><br><span class="line">            name: 'john',</span><br><span class="line">        })</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        &lt;button onClick={changeForm}&gt;修改 form {form.name}&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="6-如何修改组件样式"><a href="#6-如何修改组件样式" class="headerlink" title="6. 如何修改组件样式"></a>6. 如何修改组件样式</h2><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240706212148.png" alt="image-20240706212148864" style="zoom:33%;">

<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">// 导入样式</span><br><span class="line">import './index.css'</span><br><span class="line">const style = {</span><br><span class="line">    color: 'red',</span><br><span class="line">    fontSize: '50px',</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        {/*行内控制*/}</span><br><span class="line">        &lt;span style={{color: 'red', fontSize: '50px'}}&gt;this is span&lt;/span&gt;</span><br><span class="line">        &lt;span style={style}&gt;this is span&lt;/span&gt;</span><br><span class="line">        {/*通过 class 类名控制*/}</span><br><span class="line">        &lt;span className='foo'&gt;this is foo&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p>index.css：</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.foo</span> {</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="7-B-站评论案例"><a href="#7-B-站评论案例" class="headerlink" title="7. B 站评论案例"></a>7. B 站评论案例</h2><h3 id="7-1-列表渲染"><a href="#7-1-列表渲染" class="headerlink" title="7.1 列表渲染"></a>7.1 列表渲染</h3><p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line">import './App.scss'</span><br><span class="line">import avatar from './images/bozai.png'</span><br><span class="line">import {useState} from "react";</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 评论列表的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 根据状态渲染评论列表</span><br><span class="line"> * 2. 删除评论</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 评论列表数据</span><br><span class="line">const list = [</span><br><span class="line">  {</span><br><span class="line">    // 评论id</span><br><span class="line">    rpid: 3,</span><br><span class="line">    // 用户信息</span><br><span class="line">    user: {</span><br><span class="line">      uid: '13258165',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '周杰伦',</span><br><span class="line">    },</span><br><span class="line">    // 评论内容</span><br><span class="line">    content: '哎哟，不错哦',</span><br><span class="line">    // 评论时间</span><br><span class="line">    ctime: '10-18 08:15',</span><br><span class="line">    like: 88,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 2,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '36080105',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '许嵩',</span><br><span class="line">    },</span><br><span class="line">    content: '我寻你千百度 日出到迟暮',</span><br><span class="line">    ctime: '11-13 11:29',</span><br><span class="line">    like: 88,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 1,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '30009257',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '黑马前端',</span><br><span class="line">    },</span><br><span class="line">    content: '学前端就来黑马',</span><br><span class="line">    ctime: '10-19 09:00',</span><br><span class="line">    like: 66,</span><br><span class="line">  },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 当前登录用户信息</span><br><span class="line">const user = {</span><br><span class="line">  // 用户id</span><br><span class="line">  uid: '30009257',</span><br><span class="line">  // 用户头像</span><br><span class="line">  avatar,</span><br><span class="line">  // 用户昵称</span><br><span class="line">  uname: '黑马前端',</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 导航 Tab 的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 渲染导航 Tab 和高亮</span><br><span class="line"> * 2. 评论列表排序</span><br><span class="line"> *  最热 =&gt; 喜欢数量降序</span><br><span class="line"> *  最新 =&gt; 创建时间降序</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 导航 Tab 数组</span><br><span class="line">const tabs = [</span><br><span class="line">  { type: 'hot', text: '最热' },</span><br><span class="line">  { type: 'time', text: '最新' },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">// 渲染评论列表</span><br><span class="line">// 1.使用 useState 维护 list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const App = () =&gt; {</span><br><span class="line"></span><br><span class="line">  const [commentList, setCommentList] = useState(list);</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="app"&gt;</span><br><span class="line">      {/* 导航 Tab */}</span><br><span class="line">      &lt;div className="reply-navigation"&gt;</span><br><span class="line">        &lt;ul className="nav-bar"&gt;</span><br><span class="line">          &lt;li className="nav-title"&gt;</span><br><span class="line">            &lt;span className="nav-title-text"&gt;评论&lt;/span&gt;</span><br><span class="line">            {/* 评论数量 */}</span><br><span class="line">            &lt;span className="total-reply"&gt;{10}&lt;/span&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li className="nav-sort"&gt;</span><br><span class="line">            {/* 高亮类名： active */}</span><br><span class="line">            &lt;span className='nav-item'&gt;最新&lt;/span&gt;</span><br><span class="line">            &lt;span className='nav-item'&gt;最热&lt;/span&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div className="reply-wrap"&gt;</span><br><span class="line">        {/* 发表评论 */}</span><br><span class="line">        &lt;div className="box-normal"&gt;</span><br><span class="line">          {/* 当前用户头像 */}</span><br><span class="line">          &lt;div className="reply-box-avatar"&gt;</span><br><span class="line">            &lt;div className="bili-avatar"&gt;</span><br><span class="line">              &lt;img className="bili-avatar-img" src={avatar} alt="用户头像" /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div className="reply-box-wrap"&gt;</span><br><span class="line">            {/* 评论框 */}</span><br><span class="line">            &lt;textarea</span><br><span class="line">              className="reply-box-textarea"</span><br><span class="line">              placeholder="发一条友善的评论"</span><br><span class="line">            /&gt;</span><br><span class="line">            {/* 发布按钮 */}</span><br><span class="line">            &lt;div className="reply-box-send"&gt;</span><br><span class="line">              &lt;div className="send-text"&gt;发布&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        {/* 评论列表 */}</span><br><span class="line">        &lt;div className="reply-list"&gt;</span><br><span class="line">          {/* 评论项 */}</span><br><span class="line">          {commentList.map(item =&gt; (</span><br><span class="line">              &lt;div key={item.rpid} className="reply-item"&gt;</span><br><span class="line">                {/* 头像 */}</span><br><span class="line">                &lt;div className="root-reply-avatar"&gt;</span><br><span class="line">                  &lt;div className="bili-avatar"&gt;</span><br><span class="line">                    &lt;img</span><br><span class="line">                        className="bili-avatar-img"</span><br><span class="line">                        alt=""</span><br><span class="line">                        src={item.user.avatar}</span><br><span class="line">                    /&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div className="content-wrap"&gt;</span><br><span class="line">                  {/* 用户名 */}</span><br><span class="line">                  &lt;div className="user-info"&gt;</span><br><span class="line">                    &lt;div className="user-name"&gt;{item.user.uname}&lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  {/* 评论内容 */}</span><br><span class="line">                  &lt;div className="root-reply"&gt;</span><br><span class="line">                    &lt;span className="reply-content"&gt;{item.content}&lt;/span&gt;</span><br><span class="line">                    &lt;div className="reply-info"&gt;</span><br><span class="line">                      {/* 评论时间 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;{item.ctime}&lt;/span&gt;</span><br><span class="line">                      {/* 评论数量 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;点赞数:{item.like}&lt;/span&gt;</span><br><span class="line">                      &lt;span className="delete-btn"&gt;</span><br><span class="line">                    删除</span><br><span class="line">                  &lt;/span&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">          ))}</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App</span><br></pre></td></tr></tbody></table></figure>

<p>App.scss：</p>
<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.app</span> {</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.reply-navigation</span> {</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">22px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.nav-bar</span> {</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.nav-title</span> {</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">      <span class="attribute">align-items</span>: center;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">114px</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.nav-title-text</span> {</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#18191c</span>;</span><br><span class="line">        <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">      }</span><br><span class="line">      <span class="selector-class">.total-reply</span> {</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">36px</span> <span class="number">0</span> <span class="number">6px</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">        <span class="attribute">font-weight</span>: normal;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.nav-sort</span> {</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">      <span class="attribute">align-items</span>: center;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.nav-item</span> {</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line"></span><br><span class="line">        &amp;<span class="selector-pseudo">:hover</span> {</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#00aeec</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        &amp;<span class="selector-pseudo">:last-child</span><span class="selector-pseudo">::after</span> {</span><br><span class="line">          <span class="attribute">display</span>: none;</span><br><span class="line">        }</span><br><span class="line">        &amp;<span class="selector-pseudo">::after</span> {</span><br><span class="line">          <span class="attribute">content</span>: <span class="string">' '</span>;</span><br><span class="line">          <span class="attribute">display</span>: inline-block;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">          <span class="attribute">margin</span>: -<span class="number">1px</span> <span class="number">12px</span>;</span><br><span class="line">          <span class="attribute">background-color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.nav-item</span><span class="selector-class">.active</span> {</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#18191c</span>;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.reply-wrap</span> {</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.box-normal</span> {</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.2s</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.reply-box-avatar</span> {</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.reply-box-wrap</span> {</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.reply-box-textarea</span> {</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">      <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#181931</span>;</span><br><span class="line">      <span class="attribute">font-family</span>: inherit;</span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">38px</span>;</span><br><span class="line">      <span class="attribute">background-color</span>: <span class="number">#f1f2f3</span>;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#f1f2f3</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">      <span class="attribute">outline</span>: none;</span><br><span class="line">      <span class="attribute">resize</span>: none;</span><br><span class="line">      <span class="attribute">transition</span>: <span class="number">0.2s</span>;</span><br><span class="line"></span><br><span class="line">      &amp;<span class="selector-pseudo">::placeholder</span> {</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">      }</span><br><span class="line">      &amp;<span class="selector-pseudo">:focus</span> {</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#c9ccd0</span>;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.reply-box-send</span> {</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-basis</span>: <span class="number">86px</span>;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.2s</span>;</span><br><span class="line"></span><br><span class="line">    &amp; <span class="selector-class">.send-text</span> {</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    }</span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span> {</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">background-color</span>: <span class="number">#00aeec</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    }</span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> {</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.bili-avatar</span> {</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.bili-avatar-img</span> {</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="selector-tag">object</span>-fit: cover;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">image-rendering</span>: -webkit-optimize-contrast;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 评论列表</span></span><br><span class="line"><span class="selector-class">.reply-list</span> {</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">14px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.reply-item</span> {</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">22px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">80px</span>;</span><br><span class="line">  <span class="selector-class">.root-reply-avatar</span> {</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.content-wrap</span> {</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span> {</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">' '</span>;</span><br><span class="line">      <span class="attribute">display</span>: block;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">margin-top</span>: <span class="number">14px</span>;</span><br><span class="line">      <span class="attribute">background-color</span>: <span class="number">#e3e5e7</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.user-info</span> {</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">      <span class="attribute">align-items</span>: center;</span><br><span class="line">      <span class="attribute">margin-bottom</span>: <span class="number">4px</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.user-name</span> {</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#61666d</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.root-reply</span> {</span><br><span class="line">      <span class="attribute">position</span>: relative;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#181931</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">24px</span>;</span><br><span class="line">      <span class="selector-class">.reply-info</span> {</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">2px</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.reply-time</span> {</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">86px</span>;</span><br><span class="line">          <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="selector-class">.reply-like</span> {</span><br><span class="line">          <span class="attribute">display</span>: flex;</span><br><span class="line">          <span class="attribute">align-items</span>: center;</span><br><span class="line">          <span class="attribute">margin-right</span>: <span class="number">19px</span>;</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.like-icon</span> {</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">14px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">14px</span>;</span><br><span class="line">            <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">            <span class="attribute">background-position</span>: -<span class="number">153px</span> -<span class="number">25px</span>;</span><br><span class="line">            &amp;<span class="selector-pseudo">:hover</span> {</span><br><span class="line">              <span class="attribute">background-position</span>: -<span class="number">218px</span> -<span class="number">25px</span>;</span><br><span class="line">            }</span><br><span class="line">          }</span><br><span class="line">          <span class="selector-class">.like-icon</span><span class="selector-class">.liked</span> {</span><br><span class="line">            <span class="attribute">background-position</span>: -<span class="number">154px</span> -<span class="number">89px</span>;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">        <span class="selector-class">.reply-dislike</span> {</span><br><span class="line">          <span class="attribute">display</span>: flex;</span><br><span class="line">          <span class="attribute">align-items</span>: center;</span><br><span class="line">          <span class="attribute">margin-right</span>: <span class="number">19px</span>;</span><br><span class="line">          <span class="selector-class">.dislike-icon</span> {</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">16px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">16px</span>;</span><br><span class="line">            <span class="attribute">background-position</span>: -<span class="number">153px</span> -<span class="number">153px</span>;</span><br><span class="line">            &amp;<span class="selector-pseudo">:hover</span> {</span><br><span class="line">              <span class="attribute">background-position</span>: -<span class="number">217px</span> -<span class="number">153px</span>;</span><br><span class="line">            }</span><br><span class="line">          }</span><br><span class="line">          <span class="selector-class">.dislike-icon</span><span class="selector-class">.disliked</span> {</span><br><span class="line">            <span class="attribute">background-position</span>: -<span class="number">154px</span> -<span class="number">217px</span>;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">        <span class="selector-class">.delete-btn</span> {</span><br><span class="line">          <span class="attribute">cursor</span>: pointer;</span><br><span class="line">          &amp;<span class="selector-pseudo">:hover</span> {</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#00aeec</span>;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.reply-none</span> {</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">64px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#99a2aa</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">64px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240706224956.png" alt="image-20240706224956160"></p>
<h3 id="7-2-删除功能实现"><a href="#7-2-删除功能实现" class="headerlink" title="7.2 删除功能实现"></a>7.2 删除功能实现</h3><p>需求：</p>
<ol>
<li>只有自己的评论才可以删除</li>
<li>点击删除按钮，删除当前评论，列表中不再显示</li>
</ol>
<p>核心思路：</p>
<ol>
<li>删除显示 - 条件渲染</li>
<li>删除功能 - 拿到当前项 id 以 id 为条件对评论列表做过滤</li>
</ol>
<h3 id="7-3-渲染-Tab-点击高亮实现"><a href="#7-3-渲染-Tab-点击高亮实现" class="headerlink" title="7.3 渲染 Tab + 点击高亮实现"></a>7.3 渲染 Tab + 点击高亮实现</h3><p>需求：点击哪个 tab 项，哪个做高亮处理</p>
<p>核心思路：</p>
<p>点击谁就把谁的type(独一无二的标识)记录下来，然后和遍历时的每一项的type做匹配，谁匹配到就设置负责高亮的类名</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line">import './App.scss'</span><br><span class="line">import avatar from './images/bozai.png'</span><br><span class="line">import {useState} from "react";</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 评论列表的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 根据状态渲染评论列表</span><br><span class="line"> * 2. 删除评论</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 评论列表数据</span><br><span class="line">const list = [</span><br><span class="line">  {</span><br><span class="line">    // 评论id</span><br><span class="line">    rpid: 3,</span><br><span class="line">    // 用户信息</span><br><span class="line">    user: {</span><br><span class="line">      uid: '13258165',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '周杰伦',</span><br><span class="line">    },</span><br><span class="line">    // 评论内容</span><br><span class="line">    content: '哎哟，不错哦',</span><br><span class="line">    // 评论时间</span><br><span class="line">    ctime: '10-18 08:15',</span><br><span class="line">    like: 88,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 2,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '36080105',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '许嵩',</span><br><span class="line">    },</span><br><span class="line">    content: '我寻你千百度 日出到迟暮',</span><br><span class="line">    ctime: '11-13 11:29',</span><br><span class="line">    like: 88,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 1,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '30009257',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '黑马前端',</span><br><span class="line">    },</span><br><span class="line">    content: '学前端就来黑马',</span><br><span class="line">    ctime: '10-19 09:00',</span><br><span class="line">    like: 66,</span><br><span class="line">  },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 当前登录用户信息</span><br><span class="line">const user = {</span><br><span class="line">  // 用户id</span><br><span class="line">  uid: '30009257',</span><br><span class="line">  // 用户头像</span><br><span class="line">  avatar,</span><br><span class="line">  // 用户昵称</span><br><span class="line">  uname: '黑马前端',</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 导航 Tab 的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 渲染导航 Tab 和高亮</span><br><span class="line"> * 2. 评论列表排序</span><br><span class="line"> *  最热 =&gt; 喜欢数量降序</span><br><span class="line"> *  最新 =&gt; 创建时间降序</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 导航 Tab 数组</span><br><span class="line">const tabs = [</span><br><span class="line">  { type: 'hot', text: '最热' },</span><br><span class="line">  { type: 'time', text: '最新' },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">const App = () =&gt; {</span><br><span class="line"></span><br><span class="line">  // 渲染评论列表</span><br><span class="line">  // 1.使用 useState 维护 list</span><br><span class="line">  const [commentList, setCommentList] = useState(list);</span><br><span class="line"></span><br><span class="line">  // 删除功能</span><br><span class="line">  const handleDel = (id) =&gt; {</span><br><span class="line">    // 对 commentList 进行过滤</span><br><span class="line">    setCommentList(commentList.filter(item =&gt; item.rpid !== id));</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // tab 切换功能</span><br><span class="line">  // 1.点击谁就把谁的 type 记录下来</span><br><span class="line">  // 2.通过记录 type 和每一项遍历时的 type 做匹配 控制激活类名的显示</span><br><span class="line">  const [type, setType] = useState('hot');</span><br><span class="line">  const handleTabChange = (type) =&gt; {</span><br><span class="line">    console.log(type);</span><br><span class="line">    setType(type);</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="app"&gt;</span><br><span class="line">      {/* 导航 Tab */}</span><br><span class="line">      &lt;div className="reply-navigation"&gt;</span><br><span class="line">        &lt;ul className="nav-bar"&gt;</span><br><span class="line">          &lt;li className="nav-title"&gt;</span><br><span class="line">            &lt;span className="nav-title-text"&gt;评论&lt;/span&gt;</span><br><span class="line">            {/* 评论数量 */}</span><br><span class="line">            &lt;span className="total-reply"&gt;{10}&lt;/span&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li className="nav-sort"&gt;</span><br><span class="line">            {/* 高亮类名： active */}</span><br><span class="line">            {tabs.map(item =&gt;</span><br><span class="line">                &lt;span key={item.type}</span><br><span class="line">                      onClick={() =&gt; handleTabChange(item.type)}</span><br><span class="line">                      className={`nav-item ${type === item.type &amp;&amp; 'active'}`}&gt;</span><br><span class="line">                  {item.text}</span><br><span class="line">                &lt;/span&gt;)}</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div className="reply-wrap"&gt;</span><br><span class="line">        {/* 发表评论 */}</span><br><span class="line">        &lt;div className="box-normal"&gt;</span><br><span class="line">          {/* 当前用户头像 */}</span><br><span class="line">          &lt;div className="reply-box-avatar"&gt;</span><br><span class="line">            &lt;div className="bili-avatar"&gt;</span><br><span class="line">              &lt;img className="bili-avatar-img" src={avatar} alt="用户头像" /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div className="reply-box-wrap"&gt;</span><br><span class="line">            {/* 评论框 */}</span><br><span class="line">            &lt;textarea</span><br><span class="line">              className="reply-box-textarea"</span><br><span class="line">              placeholder="发一条友善的评论"</span><br><span class="line">            /&gt;</span><br><span class="line">            {/* 发布按钮 */}</span><br><span class="line">            &lt;div className="reply-box-send"&gt;</span><br><span class="line">              &lt;div className="send-text"&gt;发布&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        {/* 评论列表 */}</span><br><span class="line">        &lt;div className="reply-list"&gt;</span><br><span class="line">          {/* 评论项 */}</span><br><span class="line">          {commentList.map(item =&gt; (</span><br><span class="line">              &lt;div key={item.rpid} className="reply-item"&gt;</span><br><span class="line">                {/* 头像 */}</span><br><span class="line">                &lt;div className="root-reply-avatar"&gt;</span><br><span class="line">                  &lt;div className="bili-avatar"&gt;</span><br><span class="line">                    &lt;img</span><br><span class="line">                        className="bili-avatar-img"</span><br><span class="line">                        alt=""</span><br><span class="line">                        src={item.user.avatar}</span><br><span class="line">                    /&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div className="content-wrap"&gt;</span><br><span class="line">                  {/* 用户名 */}</span><br><span class="line">                  &lt;div className="user-info"&gt;</span><br><span class="line">                    &lt;div className="user-name"&gt;{item.user.uname}&lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  {/* 评论内容 */}</span><br><span class="line">                  &lt;div className="root-reply"&gt;</span><br><span class="line">                    &lt;span className="reply-content"&gt;{item.content}&lt;/span&gt;</span><br><span class="line">                    &lt;div className="reply-info"&gt;</span><br><span class="line">                      {/* 评论时间 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;{item.ctime}&lt;/span&gt;</span><br><span class="line">                      {/* 评论数量 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;点赞数:{item.like}&lt;/span&gt;</span><br><span class="line">                      {/*条件：user.id === item.user.id*/}</span><br><span class="line">                      {user.uid === item.user.uid  &amp;&amp; &lt;span className="delete-btn" onClick={() =&gt; handleDel(item.rpid)}&gt;删除&lt;/span&gt;}</span><br><span class="line"></span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">          ))}</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App</span><br></pre></td></tr></tbody></table></figure>

<h3 id="7-4-排序功能"><a href="#7-4-排序功能" class="headerlink" title="7.4 排序功能"></a>7.4 排序功能</h3><p>需求：点击最新，评论列表按照创建时间倒序排列（新的在前），点击最热按照点赞数排序（多的在前)</p>
<p>核心思路：把评论列表状态数据进行不同的排序处理，当成新值传给 set 函数重新渲染视图 UI</p>
<h4 id="lodash-库"><a href="#lodash-库" class="headerlink" title="lodash 库"></a><strong>lodash 库</strong></h4><p>安装：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install lodash</span><br></pre></td></tr></tbody></table></figure>

<p>引入：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setCommentList</span>(_.<span class="title function_">orderBy</span>(commentList, <span class="string">'like'</span>, <span class="string">'desc'</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line">import './App.scss'</span><br><span class="line">import avatar from './images/bozai.png'</span><br><span class="line">import {useState} from "react";</span><br><span class="line">import _ from 'lodash';</span><br><span class="line">/**</span><br><span class="line"> * 评论列表的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 根据状态渲染评论列表</span><br><span class="line"> * 2. 删除评论</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 评论列表数据</span><br><span class="line">const list = [</span><br><span class="line">  {</span><br><span class="line">    // 评论id</span><br><span class="line">    rpid: 3,</span><br><span class="line">    // 用户信息</span><br><span class="line">    user: {</span><br><span class="line">      uid: '13258165',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '周杰伦',</span><br><span class="line">    },</span><br><span class="line">    // 评论内容</span><br><span class="line">    content: '哎哟，不错哦',</span><br><span class="line">    // 评论时间</span><br><span class="line">    ctime: '10-20 08:15',</span><br><span class="line">    like: 38,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 2,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '36080105',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '许嵩',</span><br><span class="line">    },</span><br><span class="line">    content: '我寻你千百度 日出到迟暮',</span><br><span class="line">    ctime: '09-13 11:29',</span><br><span class="line">    like: 88,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 1,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '30009257',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '黑马前端',</span><br><span class="line">    },</span><br><span class="line">    content: '学前端就来黑马',</span><br><span class="line">    ctime: '10-19 09:00',</span><br><span class="line">    like: 66,</span><br><span class="line">  },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 当前登录用户信息</span><br><span class="line">const user = {</span><br><span class="line">  // 用户id</span><br><span class="line">  uid: '30009257',</span><br><span class="line">  // 用户头像</span><br><span class="line">  avatar,</span><br><span class="line">  // 用户昵称</span><br><span class="line">  uname: '黑马前端',</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 导航 Tab 的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 渲染导航 Tab 和高亮</span><br><span class="line"> * 2. 评论列表排序</span><br><span class="line"> *  最热 =&gt; 喜欢数量降序</span><br><span class="line"> *  最新 =&gt; 创建时间降序</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 导航 Tab 数组</span><br><span class="line">const tabs = [</span><br><span class="line">  { type: 'hot', text: '最热' },</span><br><span class="line">  { type: 'time', text: '最新' },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">const App = () =&gt; {</span><br><span class="line"></span><br><span class="line">  // 渲染评论列表</span><br><span class="line">  // 1.使用 useState 维护 list</span><br><span class="line">  const [commentList, setCommentList] = useState(_.orderBy(list, 'like', 'desc'));</span><br><span class="line"></span><br><span class="line">  // 删除功能</span><br><span class="line">  const handleDel = (id) =&gt; {</span><br><span class="line">    // 对 commentList 进行过滤</span><br><span class="line">    setCommentList(commentList.filter(item =&gt; item.rpid !== id));</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // tab 切换功能</span><br><span class="line">  // 1.点击谁就把谁的 type 记录下来</span><br><span class="line">  // 2.通过记录 type 和每一项遍历时的 type 做匹配 控制激活类名的显示</span><br><span class="line">  const [type, setType] = useState('hot');</span><br><span class="line">  const handleTabChange = (type) =&gt; {</span><br><span class="line">    console.log(type);</span><br><span class="line">    setType(type);</span><br><span class="line">    // 基于列表的排序</span><br><span class="line">    if (type === 'hot') {</span><br><span class="line">      // 根据点赞数量排序</span><br><span class="line">      // lodash</span><br><span class="line">      setCommentList(_.orderBy(commentList, 'like', 'desc'));</span><br><span class="line">    } else {</span><br><span class="line">      // 根据创建时间排序</span><br><span class="line">      setCommentList(_.orderBy(commentList, 'ctime', 'desc'))</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="app"&gt;</span><br><span class="line">      {/* 导航 Tab */}</span><br><span class="line">      &lt;div className="reply-navigation"&gt;</span><br><span class="line">        &lt;ul className="nav-bar"&gt;</span><br><span class="line">          &lt;li className="nav-title"&gt;</span><br><span class="line">            &lt;span className="nav-title-text"&gt;评论&lt;/span&gt;</span><br><span class="line">            {/* 评论数量 */}</span><br><span class="line">            &lt;span className="total-reply"&gt;{10}&lt;/span&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li className="nav-sort"&gt;</span><br><span class="line">            {/* 高亮类名： active */}</span><br><span class="line">            {tabs.map(item =&gt;</span><br><span class="line">                &lt;span key={item.type}</span><br><span class="line">                      onClick={() =&gt; handleTabChange(item.type)}</span><br><span class="line">                      className={`nav-item ${type === item.type &amp;&amp; 'active'}`}&gt;</span><br><span class="line">                  {item.text}</span><br><span class="line">                &lt;/span&gt;)}</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div className="reply-wrap"&gt;</span><br><span class="line">        {/* 发表评论 */}</span><br><span class="line">        &lt;div className="box-normal"&gt;</span><br><span class="line">          {/* 当前用户头像 */}</span><br><span class="line">          &lt;div className="reply-box-avatar"&gt;</span><br><span class="line">            &lt;div className="bili-avatar"&gt;</span><br><span class="line">              &lt;img className="bili-avatar-img" src={avatar} alt="用户头像" /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div className="reply-box-wrap"&gt;</span><br><span class="line">            {/* 评论框 */}</span><br><span class="line">            &lt;textarea</span><br><span class="line">              className="reply-box-textarea"</span><br><span class="line">              placeholder="发一条友善的评论"</span><br><span class="line">            /&gt;</span><br><span class="line">            {/* 发布按钮 */}</span><br><span class="line">            &lt;div className="reply-box-send"&gt;</span><br><span class="line">              &lt;div className="send-text"&gt;发布&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        {/* 评论列表 */}</span><br><span class="line">        &lt;div className="reply-list"&gt;</span><br><span class="line">          {/* 评论项 */}</span><br><span class="line">          {commentList.map(item =&gt; (</span><br><span class="line">              &lt;div key={item.rpid} className="reply-item"&gt;</span><br><span class="line">                {/* 头像 */}</span><br><span class="line">                &lt;div className="root-reply-avatar"&gt;</span><br><span class="line">                  &lt;div className="bili-avatar"&gt;</span><br><span class="line">                    &lt;img</span><br><span class="line">                        className="bili-avatar-img"</span><br><span class="line">                        alt=""</span><br><span class="line">                        src={item.user.avatar}</span><br><span class="line">                    /&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div className="content-wrap"&gt;</span><br><span class="line">                  {/* 用户名 */}</span><br><span class="line">                  &lt;div className="user-info"&gt;</span><br><span class="line">                    &lt;div className="user-name"&gt;{item.user.uname}&lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  {/* 评论内容 */}</span><br><span class="line">                  &lt;div className="root-reply"&gt;</span><br><span class="line">                    &lt;span className="reply-content"&gt;{item.content}&lt;/span&gt;</span><br><span class="line">                    &lt;div className="reply-info"&gt;</span><br><span class="line">                      {/* 评论时间 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;{item.ctime}&lt;/span&gt;</span><br><span class="line">                      {/* 评论数量 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;点赞数:{item.like}&lt;/span&gt;</span><br><span class="line">                      {/*条件：user.id === item.user.id*/}</span><br><span class="line">                      {user.uid === item.user.uid  &amp;&amp; &lt;span className="delete-btn" onClick={() =&gt; handleDel(item.rpid)}&gt;删除&lt;/span&gt;}</span><br><span class="line"></span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">          ))}</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App</span><br></pre></td></tr></tbody></table></figure>

<h2 id="8-classnams-优化类名控制"><a href="#8-classnams-优化类名控制" class="headerlink" title="8. classnams 优化类名控制"></a>8. classnams 优化类名控制</h2><p>classnams 是一个简单的 JS 库，可以非常方便的通过条件动态控制 class 类名的显示</p>
<p>以前出现的问题：</p>
<p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240707135835.png" alt="image-20240707135835054"></p>
<p>语法：key 表示要控制的类名，value 表示条件，true 的时候类名就会显示</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>安装：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install classnames</span><br></pre></td></tr></tbody></table></figure>

<p>引入：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">"classnames"</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>用法：</p>
<figure class="highlight jsx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;span key={item.<span class="property">type</span>}</span><br><span class="line">  	onClick={<span class="function">() =&gt;</span> <span class="title function_">handleTabChange</span>(item.<span class="property">type</span>)}</span><br><span class="line">  	className={<span class="title function_">classNames</span>(<span class="string">'nav-item'</span>, {<span class="attr">active</span>: type === item.<span class="property">type</span>})}&gt;</span><br><span class="line">  	{item.<span class="property">text</span>}</span><br><span class="line">&lt;/span&gt;)}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="9-受表单控制项"><a href="#9-受表单控制项" class="headerlink" title="9. 受表单控制项"></a>9. 受表单控制项</h2><p>概念：使用 React 组件的状态（useState）控制表单状态</p>
<p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240707141640.png" alt="image-20240707141640229"></p>
<p>App.js</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 项目的根组件</span><br><span class="line">// App -&gt; index.js -&gt; public/index.html(root)  =&gt; App 根组件被导入到 index.js，然后渲染到 index.html 的 root 节点上</span><br><span class="line"></span><br><span class="line">// 1.声明一个 react 状态 - useState</span><br><span class="line">// 2.核心绑定流程</span><br><span class="line">// 2.1通过 value 属性绑定 react 状态</span><br><span class="line">// 2.2绑定 onChange 事件，通过事件参数 e 拿到输入框最新值，反向修改 react 状态</span><br><span class="line"></span><br><span class="line">import {useState} from "react";</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">   const [value, setValue] =  useState();</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">            value={value}</span><br><span class="line">            onChange={(e) =&gt; setValue(e.target.value)}</span><br><span class="line">            type='text'</span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="10-React-中获取DOM"><a href="#10-React-中获取DOM" class="headerlink" title="10. React 中获取DOM"></a>10. React 中获取DOM</h2><p>在 React 中获取/操作 DOM，需要使用 useRef 钩子函数，分为两步：</p>
<ol>
<li>使用 useRef 创建 ref 对象，并与 JSX 绑定</li>
<li>在 DOM 可用/DOM 渲染完毕时，通过 inputRef.current 拿到 DOM 对象</li>
</ol>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">import React, { useRef } from "react";</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">    const inputRef = useRef(null);</span><br><span class="line"></span><br><span class="line">    const showDom = () =&gt; {</span><br><span class="line">        console.log(inputRef.current);</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    const setInputValue = () =&gt; {</span><br><span class="line">        inputRef.current.value = '新的值';</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    const focusInput = () =&gt; {</span><br><span class="line">        inputRef.current.focus();</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    const selectInputText = () =&gt; {</span><br><span class="line">        inputRef.current.select();</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    const addClassToInput = () =&gt; {</span><br><span class="line">        inputRef.current.classList.add('new-class');</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    const removeClassFromInput = () =&gt; {</span><br><span class="line">        inputRef.current.classList.remove('new-class');</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    const addEventListenerToInput = () =&gt; {</span><br><span class="line">        inputRef.current.addEventListener('input', (event) =&gt; {</span><br><span class="line">            console.log('Input changed:', event.target.value);</span><br><span class="line">        });</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            &lt;input ref={inputRef} type='text'/&gt;</span><br><span class="line">            &lt;button onClick={showDom}&gt;获取 dom&lt;/button&gt;</span><br><span class="line">            &lt;button onClick={setInputValue}&gt;设置值&lt;/button&gt;</span><br><span class="line">            &lt;button onClick={focusInput}&gt;聚焦&lt;/button&gt;</span><br><span class="line">            &lt;button onClick={selectInputText}&gt;选择文本&lt;/button&gt;</span><br><span class="line">            &lt;button onClick={addClassToInput}&gt;添加类&lt;/button&gt;</span><br><span class="line">            &lt;button onClick={removeClassFromInput}&gt;移除类&lt;/button&gt;</span><br><span class="line">            &lt;button onClick={addEventListenerToInput}&gt;添加事件监听器&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="11-B-站评论优化"><a href="#11-B-站评论优化" class="headerlink" title="11.B 站评论优化"></a>11.B 站评论优化</h2><h3 id="11-1-发表评论"><a href="#11-1-发表评论" class="headerlink" title="11.1 发表评论"></a>11.1 发表评论</h3><p>App.scss：</p>
<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.app</span> {</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.reply-navigation</span> {</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">22px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.nav-bar</span> {</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.nav-title</span> {</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">      <span class="attribute">align-items</span>: center;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">114px</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.nav-title-text</span> {</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#18191c</span>;</span><br><span class="line">        <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">      }</span><br><span class="line">      <span class="selector-class">.total-reply</span> {</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">36px</span> <span class="number">0</span> <span class="number">6px</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">        <span class="attribute">font-weight</span>: normal;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.nav-sort</span> {</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">      <span class="attribute">align-items</span>: center;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.nav-item</span> {</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line"></span><br><span class="line">        &amp;<span class="selector-pseudo">:hover</span> {</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#00aeec</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        &amp;<span class="selector-pseudo">:last-child</span><span class="selector-pseudo">::after</span> {</span><br><span class="line">          <span class="attribute">display</span>: none;</span><br><span class="line">        }</span><br><span class="line">        &amp;<span class="selector-pseudo">::after</span> {</span><br><span class="line">          <span class="attribute">content</span>: <span class="string">' '</span>;</span><br><span class="line">          <span class="attribute">display</span>: inline-block;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">          <span class="attribute">margin</span>: -<span class="number">1px</span> <span class="number">12px</span>;</span><br><span class="line">          <span class="attribute">background-color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.nav-item</span><span class="selector-class">.active</span> {</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#18191c</span>;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.reply-wrap</span> {</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.box-normal</span> {</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.2s</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.reply-box-avatar</span> {</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.reply-box-wrap</span> {</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.reply-box-textarea</span> {</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">      <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#181931</span>;</span><br><span class="line">      <span class="attribute">font-family</span>: inherit;</span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">38px</span>;</span><br><span class="line">      <span class="attribute">background-color</span>: <span class="number">#f1f2f3</span>;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#f1f2f3</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">      <span class="attribute">outline</span>: none;</span><br><span class="line">      <span class="attribute">resize</span>: none;</span><br><span class="line">      <span class="attribute">transition</span>: <span class="number">0.2s</span>;</span><br><span class="line"></span><br><span class="line">      &amp;<span class="selector-pseudo">::placeholder</span> {</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">      }</span><br><span class="line">      &amp;<span class="selector-pseudo">:focus</span> {</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#c9ccd0</span>;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.reply-box-send</span> {</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-basis</span>: <span class="number">86px</span>;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.2s</span>;</span><br><span class="line"></span><br><span class="line">    &amp; <span class="selector-class">.send-text</span> {</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    }</span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span> {</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">background-color</span>: <span class="number">#00aeec</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    }</span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> {</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.bili-avatar</span> {</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.bili-avatar-img</span> {</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">  <span class="selector-tag">object</span>-fit: cover;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">image-rendering</span>: -webkit-optimize-contrast;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 评论列表</span></span><br><span class="line"><span class="selector-class">.reply-list</span> {</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">14px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.reply-item</span> {</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">22px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">80px</span>;</span><br><span class="line">  <span class="selector-class">.root-reply-avatar</span> {</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.content-wrap</span> {</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span> {</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">' '</span>;</span><br><span class="line">      <span class="attribute">display</span>: block;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">margin-top</span>: <span class="number">14px</span>;</span><br><span class="line">      <span class="attribute">background-color</span>: <span class="number">#e3e5e7</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.user-info</span> {</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">      <span class="attribute">align-items</span>: center;</span><br><span class="line">      <span class="attribute">margin-bottom</span>: <span class="number">4px</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.user-name</span> {</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#61666d</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.root-reply</span> {</span><br><span class="line">      <span class="attribute">position</span>: relative;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#181931</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">24px</span>;</span><br><span class="line">      <span class="selector-class">.reply-info</span> {</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">2px</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.reply-time</span> {</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">86px</span>;</span><br><span class="line">          <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="selector-class">.reply-like</span> {</span><br><span class="line">          <span class="attribute">display</span>: flex;</span><br><span class="line">          <span class="attribute">align-items</span>: center;</span><br><span class="line">          <span class="attribute">margin-right</span>: <span class="number">19px</span>;</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.like-icon</span> {</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">14px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">14px</span>;</span><br><span class="line">            <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#9499a0</span>;</span><br><span class="line">            <span class="attribute">background-position</span>: -<span class="number">153px</span> -<span class="number">25px</span>;</span><br><span class="line">            &amp;<span class="selector-pseudo">:hover</span> {</span><br><span class="line">              <span class="attribute">background-position</span>: -<span class="number">218px</span> -<span class="number">25px</span>;</span><br><span class="line">            }</span><br><span class="line">          }</span><br><span class="line">          <span class="selector-class">.like-icon</span><span class="selector-class">.liked</span> {</span><br><span class="line">            <span class="attribute">background-position</span>: -<span class="number">154px</span> -<span class="number">89px</span>;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">        <span class="selector-class">.reply-dislike</span> {</span><br><span class="line">          <span class="attribute">display</span>: flex;</span><br><span class="line">          <span class="attribute">align-items</span>: center;</span><br><span class="line">          <span class="attribute">margin-right</span>: <span class="number">19px</span>;</span><br><span class="line">          <span class="selector-class">.dislike-icon</span> {</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">16px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">16px</span>;</span><br><span class="line">            <span class="attribute">background-position</span>: -<span class="number">153px</span> -<span class="number">153px</span>;</span><br><span class="line">            &amp;<span class="selector-pseudo">:hover</span> {</span><br><span class="line">              <span class="attribute">background-position</span>: -<span class="number">217px</span> -<span class="number">153px</span>;</span><br><span class="line">            }</span><br><span class="line">          }</span><br><span class="line">          <span class="selector-class">.dislike-icon</span><span class="selector-class">.disliked</span> {</span><br><span class="line">            <span class="attribute">background-position</span>: -<span class="number">154px</span> -<span class="number">217px</span>;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">        <span class="selector-class">.delete-btn</span> {</span><br><span class="line">          <span class="attribute">cursor</span>: pointer;</span><br><span class="line">          &amp;<span class="selector-pseudo">:hover</span> {</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#00aeec</span>;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.reply-none</span> {</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">64px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#99a2aa</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">64px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line">import './App.scss'</span><br><span class="line">import avatar from './images/bozai.png'</span><br><span class="line">import {useState} from "react";</span><br><span class="line">import _ from 'lodash';</span><br><span class="line">import classNames from "classnames";</span><br><span class="line">/**</span><br><span class="line"> * 评论列表的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 根据状态渲染评论列表</span><br><span class="line"> * 2. 删除评论</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 评论列表数据</span><br><span class="line">const list = [</span><br><span class="line">  {</span><br><span class="line">    // 评论id</span><br><span class="line">    rpid: 3,</span><br><span class="line">    // 用户信息</span><br><span class="line">    user: {</span><br><span class="line">      uid: '13258165',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '周杰伦',</span><br><span class="line">    },</span><br><span class="line">    // 评论内容</span><br><span class="line">    content: '哎哟，不错哦',</span><br><span class="line">    // 评论时间</span><br><span class="line">    ctime: '10-20 08:15',</span><br><span class="line">    like: 38,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 2,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '36080105',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '许嵩',</span><br><span class="line">    },</span><br><span class="line">    content: '我寻你千百度 日出到迟暮',</span><br><span class="line">    ctime: '09-13 11:29',</span><br><span class="line">    like: 88,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 1,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '30009257',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '黑马前端',</span><br><span class="line">    },</span><br><span class="line">    content: '学前端就来黑马',</span><br><span class="line">    ctime: '10-19 09:00',</span><br><span class="line">    like: 66,</span><br><span class="line">  },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 当前登录用户信息</span><br><span class="line">const user = {</span><br><span class="line">  // 用户id</span><br><span class="line">  uid: '30009257',</span><br><span class="line">  // 用户头像</span><br><span class="line">  avatar,</span><br><span class="line">  // 用户昵称</span><br><span class="line">  uname: '黑马前端',</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 导航 Tab 的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 渲染导航 Tab 和高亮</span><br><span class="line"> * 2. 评论列表排序</span><br><span class="line"> *  最热 =&gt; 喜欢数量降序</span><br><span class="line"> *  最新 =&gt; 创建时间降序</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 导航 Tab 数组</span><br><span class="line">const tabs = [</span><br><span class="line">  { type: 'hot', text: '最热' },</span><br><span class="line">  { type: 'time', text: '最新' },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">const App = () =&gt; {</span><br><span class="line"></span><br><span class="line">  // 渲染评论列表</span><br><span class="line">  // 1.使用 useState 维护 list</span><br><span class="line">  const [commentList, setCommentList] = useState(_.orderBy(list, 'like', 'desc'));</span><br><span class="line"></span><br><span class="line">  // 删除功能</span><br><span class="line">  const handleDel = (id) =&gt; {</span><br><span class="line">    // 对 commentList 进行过滤</span><br><span class="line">    setCommentList(commentList.filter(item =&gt; item.rpid !== id));</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // tab 切换功能</span><br><span class="line">  // 1.点击谁就把谁的 type 记录下来</span><br><span class="line">  // 2.通过记录 type 和每一项遍历时的 type 做匹配 控制激活类名的显示</span><br><span class="line">  const [type, setType] = useState('hot');</span><br><span class="line">  const handleTabChange = (type) =&gt; {</span><br><span class="line">    console.log(type);</span><br><span class="line">    setType(type);</span><br><span class="line">    // 基于列表的排序</span><br><span class="line">    if (type === 'hot') {</span><br><span class="line">      // 根据点赞数量排序</span><br><span class="line">      // lodash</span><br><span class="line">      setCommentList(_.orderBy(commentList, 'like', 'desc'));</span><br><span class="line">    } else {</span><br><span class="line">      // 根据创建时间排序</span><br><span class="line">      setCommentList(_.orderBy(commentList, 'ctime', 'desc'))</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // 发表评论</span><br><span class="line">  const [content, setContent] = useState('');</span><br><span class="line">  const handlePublish = () =&gt; {</span><br><span class="line">    setCommentList([</span><br><span class="line">      ...commentList,</span><br><span class="line">      {</span><br><span class="line">        rpid: 4,</span><br><span class="line">        user: {</span><br><span class="line">          uid: '30009257',</span><br><span class="line">          avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">          uname: '黑马前端',</span><br><span class="line">        },</span><br><span class="line">        content: content,</span><br><span class="line">        ctime: '10-19 09:00',</span><br><span class="line">        like: 80,</span><br><span class="line">      }</span><br><span class="line">      ]);</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="app"&gt;</span><br><span class="line">      {/* 导航 Tab */}</span><br><span class="line">      &lt;div className="reply-navigation"&gt;</span><br><span class="line">        &lt;ul className="nav-bar"&gt;</span><br><span class="line">          &lt;li className="nav-title"&gt;</span><br><span class="line">            &lt;span className="nav-title-text"&gt;评论&lt;/span&gt;</span><br><span class="line">            {/* 评论数量 */}</span><br><span class="line">            &lt;span className="total-reply"&gt;{10}&lt;/span&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li className="nav-sort"&gt;</span><br><span class="line">            {/* 高亮类名： active */}</span><br><span class="line">            {tabs.map(item =&gt;</span><br><span class="line">                &lt;span key={item.type}</span><br><span class="line">                      onClick={() =&gt; handleTabChange(item.type)}</span><br><span class="line">                      className={classNames('nav-item', {active: type === item.type})}&gt;</span><br><span class="line">                  {item.text}</span><br><span class="line">                &lt;/span&gt;)</span><br><span class="line">            }</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div className="reply-wrap"&gt;</span><br><span class="line">        {/* 发表评论 */}</span><br><span class="line">        &lt;div className="box-normal"&gt;</span><br><span class="line">          {/* 当前用户头像 */}</span><br><span class="line">          &lt;div className="reply-box-avatar"&gt;</span><br><span class="line">            &lt;div className="bili-avatar"&gt;</span><br><span class="line">              &lt;img className="bili-avatar-img" src={avatar} alt="用户头像" /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div className="reply-box-wrap"&gt;</span><br><span class="line">            {/* 评论框 */}</span><br><span class="line">            &lt;textarea</span><br><span class="line">              className="reply-box-textarea"</span><br><span class="line">              placeholder="发一条友善的评论"</span><br><span class="line">              value={content}</span><br><span class="line">              onChange={(e) =&gt; setContent(e.target.value)}</span><br><span class="line">            /&gt;</span><br><span class="line">            {/* 发布按钮 */}</span><br><span class="line">            &lt;div className="reply-box-send"&gt;</span><br><span class="line">              &lt;div className="send-text" onClick={handlePublish}&gt;发布&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        {/* 评论列表 */}</span><br><span class="line">        &lt;div className="reply-list"&gt;</span><br><span class="line">          {/* 评论项 */}</span><br><span class="line">          {commentList.map(item =&gt; (</span><br><span class="line">              &lt;div key={item.rpid} className="reply-item"&gt;</span><br><span class="line">                {/* 头像 */}</span><br><span class="line">                &lt;div className="root-reply-avatar"&gt;</span><br><span class="line">                  &lt;div className="bili-avatar"&gt;</span><br><span class="line">                    &lt;img</span><br><span class="line">                        className="bili-avatar-img"</span><br><span class="line">                        alt=""</span><br><span class="line">                        src={item.user.avatar}</span><br><span class="line">                    /&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div className="content-wrap"&gt;</span><br><span class="line">                  {/* 用户名 */}</span><br><span class="line">                  &lt;div className="user-info"&gt;</span><br><span class="line">                    &lt;div className="user-name"&gt;{item.user.uname}&lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  {/* 评论内容 */}</span><br><span class="line">                  &lt;div className="root-reply"&gt;</span><br><span class="line">                    &lt;span className="reply-content"&gt;{item.content}&lt;/span&gt;</span><br><span class="line">                    &lt;div className="reply-info"&gt;</span><br><span class="line">                      {/* 评论时间 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;{item.ctime}&lt;/span&gt;</span><br><span class="line">                      {/* 评论数量 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;点赞数:{item.like}&lt;/span&gt;</span><br><span class="line">                      {/*条件：user.id === item.user.id*/}</span><br><span class="line">                      {user.uid === item.user.uid  &amp;&amp; &lt;span className="delete-btn" onClick={() =&gt; handleDel(item.rpid)}&gt;删除&lt;/span&gt;}</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">          ))}</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240707150807.png" alt="image-20240707150807010"></p>
<p><strong>uuid 库</strong></p>
<p>安装：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install uuid</span><br></pre></td></tr></tbody></table></figure>

<p>引入：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {v4 <span class="keyword">as</span> uuidV4} <span class="keyword">from</span> <span class="string">'uuid'</span></span><br><span class="line"><span class="title function_">uuidV4</span>(); <span class="comment">// 使用</span></span><br></pre></td></tr></tbody></table></figure>



<p><strong>dayjs 库</strong></p>
<p>安装：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install dayjs</span><br></pre></td></tr></tbody></table></figure>

<p>引入：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">'dayjs'</span></span><br><span class="line"><span class="title function_">dayjs</span>() <span class="comment">// 使用</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="11-2-发表评论后清除输入框并聚焦"><a href="#11-2-发表评论后清除输入框并聚焦" class="headerlink" title="11.2 发表评论后清除输入框并聚焦"></a>11.2 发表评论后清除输入框并聚焦</h3><p>思路：</p>
<ol>
<li>设置输入框的 useState 的 setContent 为空</li>
<li>利用 useRef 获取 dom 元素，再调用 focus 方法</li>
</ol>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line">import './App.scss'</span><br><span class="line">import avatar from './images/bozai.png'</span><br><span class="line">import {useRef, useState} from "react";</span><br><span class="line">import _ from 'lodash';</span><br><span class="line">import classNames from "classnames";</span><br><span class="line">import {v4 as uuidV4} from 'uuid'</span><br><span class="line">import dayjs from "dayjs";</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 评论列表的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 根据状态渲染评论列表</span><br><span class="line"> * 2. 删除评论</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 评论列表数据</span><br><span class="line">const list = [</span><br><span class="line">  {</span><br><span class="line">    // 评论id</span><br><span class="line">    rpid: 3,</span><br><span class="line">    // 用户信息</span><br><span class="line">    user: {</span><br><span class="line">      uid: '13258165',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '周杰伦',</span><br><span class="line">    },</span><br><span class="line">    // 评论内容</span><br><span class="line">    content: '哎哟，不错哦',</span><br><span class="line">    // 评论时间</span><br><span class="line">    ctime: '10-20 08:15',</span><br><span class="line">    like: 38,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 2,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '36080105',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '许嵩',</span><br><span class="line">    },</span><br><span class="line">    content: '我寻你千百度 日出到迟暮',</span><br><span class="line">    ctime: '09-13 11:29',</span><br><span class="line">    like: 88,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 1,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '30009257',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '黑马前端',</span><br><span class="line">    },</span><br><span class="line">    content: '学前端就来黑马',</span><br><span class="line">    ctime: '10-19 09:00',</span><br><span class="line">    like: 66,</span><br><span class="line">  },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 当前登录用户信息</span><br><span class="line">const user = {</span><br><span class="line">  // 用户id</span><br><span class="line">  uid: '30009257',</span><br><span class="line">  // 用户头像</span><br><span class="line">  avatar,</span><br><span class="line">  // 用户昵称</span><br><span class="line">  uname: '黑马前端',</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 导航 Tab 的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 渲染导航 Tab 和高亮</span><br><span class="line"> * 2. 评论列表排序</span><br><span class="line"> *  最热 =&gt; 喜欢数量降序</span><br><span class="line"> *  最新 =&gt; 创建时间降序</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 导航 Tab 数组</span><br><span class="line">const tabs = [</span><br><span class="line">  { type: 'hot', text: '最热' },</span><br><span class="line">  { type: 'time', text: '最新' },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">const App = () =&gt; {</span><br><span class="line"></span><br><span class="line">  // 渲染评论列表</span><br><span class="line">  // 1.使用 useState 维护 list</span><br><span class="line">  const [commentList, setCommentList] = useState(_.orderBy(list, 'like', 'desc'));</span><br><span class="line"></span><br><span class="line">  const inputRef = useRef(null);</span><br><span class="line"></span><br><span class="line">  // 删除功能</span><br><span class="line">  const handleDel = (id) =&gt; {</span><br><span class="line">    // 对 commentList 进行过滤</span><br><span class="line">    setCommentList(commentList.filter(item =&gt; item.rpid !== id));</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // tab 切换功能</span><br><span class="line">  // 1.点击谁就把谁的 type 记录下来</span><br><span class="line">  // 2.通过记录 type 和每一项遍历时的 type 做匹配 控制激活类名的显示</span><br><span class="line">  const [type, setType] = useState('hot');</span><br><span class="line">  const handleTabChange = (type) =&gt; {</span><br><span class="line">    console.log(type);</span><br><span class="line">    setType(type);</span><br><span class="line">    // 基于列表的排序</span><br><span class="line">    if (type === 'hot') {</span><br><span class="line">      // 根据点赞数量排序</span><br><span class="line">      // lodash</span><br><span class="line">      setCommentList(_.orderBy(commentList, 'like', 'desc'));</span><br><span class="line">    } else {</span><br><span class="line">      // 根据创建时间排序</span><br><span class="line">      setCommentList(_.orderBy(commentList, 'ctime', 'desc'))</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // 发表评论</span><br><span class="line">  const [content, setContent] = useState('');</span><br><span class="line">  const handlePublish = () =&gt; {</span><br><span class="line">    setCommentList([</span><br><span class="line">      ...commentList,</span><br><span class="line">      {</span><br><span class="line">        rpid: uuidV4(),</span><br><span class="line">        user: {</span><br><span class="line">          uid: '30009257',</span><br><span class="line">          avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">          uname: '黑马前端',</span><br><span class="line">        },</span><br><span class="line">        content: content,</span><br><span class="line">        ctime: dayjs(new Date()).format('MM-DD hh:mm'),</span><br><span class="line">        like: 80,</span><br><span class="line">      }</span><br><span class="line">      ]);</span><br><span class="line">    // 1.清楚输入框内容</span><br><span class="line">    setContent('')</span><br><span class="line">    // 2.重新聚焦</span><br><span class="line">    inputRef.current.focus();</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="app"&gt;</span><br><span class="line">      {/* 导航 Tab */}</span><br><span class="line">      &lt;div className="reply-navigation"&gt;</span><br><span class="line">        &lt;ul className="nav-bar"&gt;</span><br><span class="line">          &lt;li className="nav-title"&gt;</span><br><span class="line">            &lt;span className="nav-title-text"&gt;评论&lt;/span&gt;</span><br><span class="line">            {/* 评论数量 */}</span><br><span class="line">            &lt;span className="total-reply"&gt;{10}&lt;/span&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li className="nav-sort"&gt;</span><br><span class="line">            {/* 高亮类名： active */}</span><br><span class="line">            {tabs.map(item =&gt;</span><br><span class="line">                &lt;span key={item.type}</span><br><span class="line">                      onClick={() =&gt; handleTabChange(item.type)}</span><br><span class="line">                      className={classNames('nav-item', {active: type === item.type})}&gt;</span><br><span class="line">                  {item.text}</span><br><span class="line">                &lt;/span&gt;)</span><br><span class="line">            }</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div className="reply-wrap"&gt;</span><br><span class="line">        {/* 发表评论 */}</span><br><span class="line">        &lt;div className="box-normal"&gt;</span><br><span class="line">          {/* 当前用户头像 */}</span><br><span class="line">          &lt;div className="reply-box-avatar"&gt;</span><br><span class="line">            &lt;div className="bili-avatar"&gt;</span><br><span class="line">              &lt;img className="bili-avatar-img" src={avatar} alt="用户头像" /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div className="reply-box-wrap"&gt;</span><br><span class="line">            {/* 评论框 */}</span><br><span class="line">            &lt;textarea</span><br><span class="line">              className="reply-box-textarea"</span><br><span class="line">              placeholder="发一条友善的评论"</span><br><span class="line">              value={content}</span><br><span class="line">              onChange={(e) =&gt; setContent(e.target.value)}</span><br><span class="line">              ref={inputRef}</span><br><span class="line">            /&gt;</span><br><span class="line">            {/* 发布按钮 */}</span><br><span class="line">            &lt;div className="reply-box-send"&gt;</span><br><span class="line">              &lt;div className="send-text" onClick={handlePublish}&gt;发布&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        {/* 评论列表 */}</span><br><span class="line">        &lt;div className="reply-list"&gt;</span><br><span class="line">          {/* 评论项 */}</span><br><span class="line">          {commentList.map(item =&gt; (</span><br><span class="line">              &lt;div key={item.rpid} className="reply-item"&gt;</span><br><span class="line">                {/* 头像 */}</span><br><span class="line">                &lt;div className="root-reply-avatar"&gt;</span><br><span class="line">                  &lt;div className="bili-avatar"&gt;</span><br><span class="line">                    &lt;img</span><br><span class="line">                        className="bili-avatar-img"</span><br><span class="line">                        alt=""</span><br><span class="line">                        src={item.user.avatar}</span><br><span class="line">                    /&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div className="content-wrap"&gt;</span><br><span class="line">                  {/* 用户名 */}</span><br><span class="line">                  &lt;div className="user-info"&gt;</span><br><span class="line">                    &lt;div className="user-name"&gt;{item.user.uname}&lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  {/* 评论内容 */}</span><br><span class="line">                  &lt;div className="root-reply"&gt;</span><br><span class="line">                    &lt;span className="reply-content"&gt;{item.content}&lt;/span&gt;</span><br><span class="line">                    &lt;div className="reply-info"&gt;</span><br><span class="line">                      {/* 评论时间 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;{item.ctime}&lt;/span&gt;</span><br><span class="line">                      {/* 评论数量 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;点赞数:{item.like}&lt;/span&gt;</span><br><span class="line">                      {/*条件：user.id === item.user.id*/}</span><br><span class="line">                      {user.uid === item.user.uid  &amp;&amp; &lt;span className="delete-btn" onClick={() =&gt; handleDel(item.rpid)}&gt;删除&lt;/span&gt;}</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">          ))}</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App</span><br></pre></td></tr></tbody></table></figure>

<h2 id="12-组件间通信"><a href="#12-组件间通信" class="headerlink" title="12. 组件间通信"></a>12. 组件间通信</h2><h3 id="父传子-props"><a href="#父传子-props" class="headerlink" title="父传子 props"></a>父传子 props</h3><p><strong>传递步骤</strong>：</p>
<p>1.父组件传递数据，子组件标签身上绑定属性<br>2.子组件接收数据，props 参数</p>
<p><strong>父传子 demo：</strong></p>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import React from "react";</span><br><span class="line"></span><br><span class="line">// 父传子</span><br><span class="line">// 1.父组件传递数据，子组件标签身上绑定属性</span><br><span class="line">// 2.子组件接收数据，props 参数</span><br><span class="line">function Son (props) {</span><br><span class="line">    // props：对象包含了父组件传递过来的所有数据</span><br><span class="line">    console.log(props);</span><br><span class="line">    return &lt;div&gt;this is son, father's param is {props.name}&lt;/div&gt;;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">    const name = 'this is app name';</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            &lt;Son name={name} /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p>小 demo：</p>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import React from "react";</span><br><span class="line"></span><br><span class="line">// 父传子</span><br><span class="line">// 1.父组件传递数据，子组件标签身上绑定属性</span><br><span class="line">// 2.子组件接收数据，props 参数</span><br><span class="line">function Son (props) {</span><br><span class="line">    // props：对象包含了父组件传递过来的所有数据</span><br><span class="line">    console.log(props);</span><br><span class="line">    return &lt;div&gt;this is son, father's param is {props.name}&lt;/div&gt;;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">    const name = 'this is app name';</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            &lt;Son</span><br><span class="line">                name={name}</span><br><span class="line">                age={18}</span><br><span class="line">                isTrue={false}</span><br><span class="line">                list={['vue', 'react']}</span><br><span class="line">                cb={() =&gt; console.log(123)}</span><br><span class="line">                child={&lt;span&gt;this is span&lt;/span&gt;}</span><br><span class="line">            /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><strong>注意</strong>：</p>
<ol>
<li>父组件几乎可以给子组件传任何东西，包括布尔，数值，数组，对象和函数等</li>
<li>但是子组件不可修改父组件传递的属性，谁传递的谁修改</li>
</ol>
</blockquote>
<h3 id="父传子-特殊的-prop-children"><a href="#父传子-特殊的-prop-children" class="headerlink" title="父传子 特殊的 prop children"></a>父传子 特殊的 prop children</h3><p>组件包裹传递</p>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import React from "react";</span><br><span class="line"></span><br><span class="line">// 父传子</span><br><span class="line">// 1.父组件传递数据，子组件标签身上绑定属性</span><br><span class="line">// 2.子组件接收数据，props 参数</span><br><span class="line">function Son (props) {</span><br><span class="line">    console.log(props)</span><br><span class="line">    return &lt;div&gt;this is son, {props.children}&lt;/div&gt;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            &lt;Son&gt;</span><br><span class="line">                &lt;span&gt;this is span&lt;/span&gt;</span><br><span class="line">            &lt;/Son&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p>显示：this is son,this is span</p>
<h3 id="子传父"><a href="#子传父" class="headerlink" title="子传父"></a>子传父</h3><p>思路：子组件调用父组件中的函数并传递参数</p>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import React, {useState} from "react";</span><br><span class="line"></span><br><span class="line">// 核心：在子组件中调用父组件中的函数并传递实参</span><br><span class="line">function Son ({onGetSonMsg}) {</span><br><span class="line">    const sonMsg = 'this is son msg';</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            this is son</span><br><span class="line">            &lt;button onClick={() =&gt; onGetSonMsg(sonMsg)}&gt;sendMsg&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">    const [msg, setMsg] = useState('');</span><br><span class="line">    const getMsg = (msg) =&gt; {</span><br><span class="line">        console.log(msg);</span><br><span class="line">        setMsg(msg);</span><br><span class="line">    };</span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            this is App, {msg}</span><br><span class="line">            &lt;Son onGetSonMsg={getMsg} /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="使用状态提升实现兄弟组件通信"><a href="#使用状态提升实现兄弟组件通信" class="headerlink" title="使用状态提升实现兄弟组件通信"></a>使用状态提升实现兄弟组件通信</h3><p>思路：借助“状态提升”机制，通过父组件进行兄弟组件之间的数据传递</p>
<p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240707205817.png" alt="image-20240707205817066"></p>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import React, {useState} from "react";</span><br><span class="line"></span><br><span class="line">// 1.子传父 A -&gt; App</span><br><span class="line">// 2.子传父 B -&gt; App</span><br><span class="line">function A ({onGetAName}) {</span><br><span class="line">    // A 组件中的数据</span><br><span class="line">    const name = 'this is A name';</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            this is A component</span><br><span class="line">            &lt;button onClick={() =&gt; onGetAName(name)}&gt;send&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function B (props) {</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            this is B component, {props.name}</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">    const [name, setName] = useState('');</span><br><span class="line">    const getAName = (name) =&gt; {</span><br><span class="line">        console.log(name);</span><br><span class="line">        setName(name);</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            this is App</span><br><span class="line">            &lt;A onGetAName={getAName}/&gt;</span><br><span class="line">            &lt;B name={name}/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="使用-context-机制跨层级组件通信"><a href="#使用-context-机制跨层级组件通信" class="headerlink" title="使用 context 机制跨层级组件通信"></a>使用 context 机制跨层级组件通信</h3><p>实现步骤：</p>
<ol>
<li>使用createContext方法创建一个上下文对象Ctx</li>
<li>在顶层组件（App）中通过Ctx.Provider组件提供数据</li>
<li>在底层组件（B）中通过useContext钩子函数获取消费数据</li>
</ol>
<p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240707212308.png" alt="image-20240707212308649"></p>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">import React, {createContext, useContext} from "react";</span><br><span class="line"></span><br><span class="line">// App -&gt; A -&gt; B</span><br><span class="line"></span><br><span class="line">// 1.createContext 方法创建一个上下文对象</span><br><span class="line">const MsgContext = createContext();</span><br><span class="line">// 2.在顶层组件通过 Provider 组件提供数据</span><br><span class="line">// 3.在底层组件通过 useContext 钩子函数使用数据</span><br><span class="line"></span><br><span class="line">function A () {</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            this is A component</span><br><span class="line">            &lt;B /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function B () {</span><br><span class="line">    const msg = useContext(MsgContext);</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            this is B component, {msg}</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">    const msg = 'this is app msg';</span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            &lt;MsgContext.Provider value={msg}&gt;</span><br><span class="line">                this is App</span><br><span class="line">                &lt;A /&gt;</span><br><span class="line">            &lt;/MsgContext.Provider&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p>结果：</p>
<p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240707213150.png" alt="image-20240707213150328"></p>
<p>使用场景：</p>
<p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240707213956.png" alt="image-20240707213956128"></p>
<h2 id="13-UseEffect概念理解"><a href="#13-UseEffect概念理解" class="headerlink" title="13. UseEffect概念理解"></a>13. UseEffect概念理解</h2><p>useEffect 用于在 React 组件中<strong>创建不是由事件引起而是由渲染本身引起的操作</strong>，比如发送 ajax 请求，更改 DOM 等。</p>
<p>语法：</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> {}, [])</span><br></pre></td></tr></tbody></table></figure>

<p>参数1是一个函数，可以把它叫做副作用函数，在内部放置要执行的操作</p>
<p>参数2是一个数组，在数组里放置依赖项，不同依赖项会影响第一个参数函数的执行。<strong>当是空数组时，副作用函数只会在组件渲染完毕后执行一次。</strong></p>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import React, {useEffect, useState} from "react";</span><br><span class="line"></span><br><span class="line">const URL = 'http://geek.itheima.net/v1_0/channels';</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">    // 创建一个状态数据</span><br><span class="line">    const [list, setList] = useState([]);</span><br><span class="line">    useEffect(() =&gt; {</span><br><span class="line">        // 额外的操作 获取频道列表</span><br><span class="line">        async function getList() {</span><br><span class="line">            const res = await fetch(URL);</span><br><span class="line">            const jsonRes = await res.json();</span><br><span class="line">            console.log(jsonRes);</span><br><span class="line">            setList(jsonRes.data.channels);</span><br><span class="line">        }</span><br><span class="line">        getList();</span><br><span class="line">    }, []);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">                {list.map(item =&gt; &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;)}</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="useEffect-依赖参数说明"><a href="#useEffect-依赖参数说明" class="headerlink" title="useEffect 依赖参数说明"></a>useEffect 依赖参数说明</h3><p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240713144311.png" alt="image-20240713144310801"></p>
<p>情况一：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function App() {</span><br><span class="line">    // 1. 没有依赖项 初始 + 组件更新</span><br><span class="line">    const [count, setCount] = useState(0);</span><br><span class="line">    useEffect(() =&gt; {</span><br><span class="line">        console.log('副作用函数执行了');</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            this is app</span><br><span class="line">            &lt;button onClick={() =&gt; {setCount(count + 1)}}&gt;+{count}&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p>情况二：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function App() {</span><br><span class="line">    // 1. 没有依赖项 初始 + 组件更新</span><br><span class="line">    const [count, setCount] = useState(0);</span><br><span class="line">    // useEffect(() =&gt; {</span><br><span class="line">    //     console.log('副作用函数执行了');</span><br><span class="line">    // });</span><br><span class="line"></span><br><span class="line">    // 2. 传入空数组依赖 只在初始渲染时执行</span><br><span class="line">    useEffect(() =&gt; {</span><br><span class="line">        console.log('副作用函数执行了');</span><br><span class="line">    }, []);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            this is app</span><br><span class="line">            &lt;button onClick={() =&gt; {setCount(count + 1)}}&gt;+{count}&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>情况三：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import React, {useEffect, useState} from "react";</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">    // 1. 没有依赖项 初始 + 组件更新</span><br><span class="line">    const [count, setCount] = useState(0);</span><br><span class="line">    // useEffect(() =&gt; {</span><br><span class="line">    //     console.log('副作用函数执行了');</span><br><span class="line">    // });</span><br><span class="line"></span><br><span class="line">    // 2. 传入空数组依赖 只在初始渲染时执行</span><br><span class="line">    // useEffect(() =&gt; {</span><br><span class="line">    //     console.log('副作用函数执行了');</span><br><span class="line">    // }, []);</span><br><span class="line">    // 3. 传入特定依赖项  初始 + 依赖项变化时执行</span><br><span class="line">    useEffect(() =&gt; {</span><br><span class="line">        console.log('副作用函数执行了');</span><br><span class="line">    }, [count]);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            this is app</span><br><span class="line">            &lt;button onClick={() =&gt; {setCount(count + 1)}}&gt;+{count}&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="useEffect-清除副作用"><a href="#useEffect-清除副作用" class="headerlink" title="useEffect 清除副作用"></a>useEffect 清除副作用</h3><p>在useEffect中编写的由渲染本身引起的对接组件外部的操作，社区也经常把它叫做副作用操作，比如在useEffect中开<br>启了一个定时器，我们想在组件卸载时把这个定时器再清理掉，这个过程就是清理副作用</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import React, {useEffect, useState} from "react";</span><br><span class="line"></span><br><span class="line">function Son() {</span><br><span class="line">    useEffect(() =&gt; {</span><br><span class="line">        const timer = setInterval(() =&gt; {</span><br><span class="line">            console.log('定时器执行中……')</span><br><span class="line">        }, 1000);</span><br><span class="line"></span><br><span class="line">        return () =&gt; {</span><br><span class="line">            // 清除副作用(组件卸载时)</span><br><span class="line">            clearInterval(timer);</span><br><span class="line">        };</span><br><span class="line">    }, []);</span><br><span class="line"></span><br><span class="line">    return &lt;div&gt;this is son&lt;/div&gt;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">    const [show, setShow] = useState(true);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            {show &amp;&amp; &lt;Son /&gt;}</span><br><span class="line">            &lt;button onClick={() =&gt; setShow(false)}&gt;卸载 Son 组件&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>说明：</strong>清除副作用的函数最常见的执行时机是组件卸载时自动执行</p>
<p><strong>需求：</strong>Son 组件渲染时开启一个定时器，卸载时清除它</p>
<h2 id="14-自定义-Hook-函数"><a href="#14-自定义-Hook-函数" class="headerlink" title="14. 自定义 Hook 函数"></a>14. 自定义 Hook 函数</h2><p>概念：自定义 Hook 是以 use 开头的函数，通过自定义 Hook 函数可以用来实现逻辑的封装和复用</p>
<p>封装思路：</p>
<ol>
<li>声明一个以 use 开头的函数</li>
<li>在函数体内封装可复用的逻辑（只要是可复用的逻辑）</li>
<li>返回状态和回调（以对象或者数据返回）</li>
<li>在哪个组件中要用到，就执行这个函数，解构出状态和回调即可使用</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import React, {useEffect, useState} from "react";</span><br><span class="line"></span><br><span class="line">// 问题：布尔切换逻辑与当前组件耦合在一起，不方便使用</span><br><span class="line">// 解决思路：自定义 hook</span><br><span class="line"></span><br><span class="line">function useToggle() {</span><br><span class="line">    // 可复用的代码逻辑</span><br><span class="line">    const [value, setValue] = useState(true);</span><br><span class="line"></span><br><span class="line">    const toggle = () =&gt; setValue(!value);</span><br><span class="line">    // 哪些状态和回调函数需要在其他组件使用 return</span><br><span class="line">    return {</span><br><span class="line">        value,</span><br><span class="line">        toggle</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">    const { value, toggle } = useToggle();</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            {value &amp;&amp; &lt;div&gt;this is div&lt;/div&gt;}</span><br><span class="line">            &lt;button onClick={toggle}&gt;toggle&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>



<h2 id="15-ReactHooks-使用规则"><a href="#15-ReactHooks-使用规则" class="headerlink" title="15. ReactHooks 使用规则"></a>15. ReactHooks 使用规则</h2><ol>
<li>只能在组件中或者其他自定义Hook函数中调用</li>
<li>只能在组件的顶层调用，不能嵌套在 if、for、其他函数中</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import React, {useEffect, useState} from "react";</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 问题：布尔切换逻辑与当前组件耦合在一起，不方便使用</span><br><span class="line">// 解决思路：自定义 hook</span><br><span class="line"></span><br><span class="line">function useToggle() {</span><br><span class="line">    // 可复用的代码逻辑</span><br><span class="line">    const [value, setValue] = useState(true);</span><br><span class="line"></span><br><span class="line">    const toggle = () =&gt; setValue(!value);</span><br><span class="line">    // 哪些状态和回调函数需要在其他组件使用 return</span><br><span class="line">    return {</span><br><span class="line">        value,</span><br><span class="line">        toggle</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">    const { value, toggle } = useToggle();</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            {value &amp;&amp; &lt;div&gt;this is div&lt;/div&gt;}</span><br><span class="line">            &lt;button onClick={toggle}&gt;toggle&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>



<h2 id="16-B-站评论优化"><a href="#16-B-站评论优化" class="headerlink" title="16. B 站评论优化"></a>16. B 站评论优化</h2><h3 id="模拟请求评论接口，抽象出-Hook"><a href="#模拟请求评论接口，抽象出-Hook" class="headerlink" title="模拟请求评论接口，抽象出 Hook"></a>模拟请求评论接口，抽象出 Hook</h3><p>实现思路：</p>
<p>1.使用 json-server 工具模拟接口服务，通过 axios 发送接口请求</p>
<p>2.使用 useEffect 调用接口获取数据</p>
<p>安装 json-server 库：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i json-server -D</span><br></pre></td></tr></tbody></table></figure>

<p>安装 axios 库：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></tbody></table></figure>



<p>db.json：</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"list"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">{</span></span><br><span class="line">      <span class="attr">"rpid"</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"user"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"uid"</span><span class="punctuation">:</span> <span class="string">"13258165"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"avatar"</span><span class="punctuation">:</span> <span class="string">"http://toutiao.itheima.net/resources/images/98.jpg"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"uname"</span><span class="punctuation">:</span> <span class="string">"周杰伦"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"content"</span><span class="punctuation">:</span> <span class="string">"哎哟，不错哦"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"ctime"</span><span class="punctuation">:</span> <span class="string">"10-18 08: 15"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"like"</span><span class="punctuation">:</span> <span class="number">126</span></span><br><span class="line">    <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">{</span></span><br><span class="line">      <span class="attr">"rpid"</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"user"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"uid"</span><span class="punctuation">:</span> <span class="string">"36080105"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"avatar"</span><span class="punctuation">:</span> <span class="string">"http://toutiao.itheima.net/resources/images/98.jpg"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"uname"</span><span class="punctuation">:</span> <span class="string">"许嵩"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"content"</span><span class="punctuation">:</span> <span class="string">"我寻你千百度 日出到迟暮"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"ctime"</span><span class="punctuation">:</span> <span class="string">"11-13 11: 29"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"like"</span><span class="punctuation">:</span> <span class="number">88</span></span><br><span class="line">    <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">{</span></span><br><span class="line">      <span class="attr">"rpid"</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"user"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"uid"</span><span class="punctuation">:</span> <span class="string">"30009257"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"avatar"</span><span class="punctuation">:</span> <span class="string">"http://toutiao.itheima.net/resources/images/98.jpg"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"uname"</span><span class="punctuation">:</span> <span class="string">"黑马前端"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"content"</span><span class="punctuation">:</span> <span class="string">"学前端就来黑马"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"ctime"</span><span class="punctuation">:</span> <span class="string">"10-19 09: 00"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"like"</span><span class="punctuation">:</span> <span class="number">66</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure>

<p>改写 package.json：</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">"scripts"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"start"</span><span class="punctuation">:</span> <span class="string">"react-scripts start"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"build"</span><span class="punctuation">:</span> <span class="string">"react-scripts build"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"serve"</span><span class="punctuation">:</span> <span class="string">"json-server db.json --port 3004"</span></span><br><span class="line"><span class="punctuation">}</span><span class="punctuation">,</span></span><br></pre></td></tr></tbody></table></figure>

<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><span class="line">import './App.scss'</span><br><span class="line">import avatar from './images/bozai.png'</span><br><span class="line">import {useEffect, useRef, useState} from "react";</span><br><span class="line">import _ from 'lodash';</span><br><span class="line">import classNames from "classnames";</span><br><span class="line">import {v4 as uuidV4} from 'uuid'</span><br><span class="line">import dayjs from "dayjs";</span><br><span class="line">import axios from "axios";</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 评论列表的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 根据状态渲染评论列表</span><br><span class="line"> * 2. 删除评论</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 评论列表数据</span><br><span class="line">const list = [</span><br><span class="line">  {</span><br><span class="line">    // 评论id</span><br><span class="line">    rpid: 3,</span><br><span class="line">    // 用户信息</span><br><span class="line">    user: {</span><br><span class="line">      uid: '13258165',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '周杰伦',</span><br><span class="line">    },</span><br><span class="line">    // 评论内容</span><br><span class="line">    content: '哎哟，不错哦',</span><br><span class="line">    // 评论时间</span><br><span class="line">    ctime: '10-20 08:15',</span><br><span class="line">    like: 38,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 2,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '36080105',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '许嵩',</span><br><span class="line">    },</span><br><span class="line">    content: '我寻你千百度 日出到迟暮',</span><br><span class="line">    ctime: '09-13 11:29',</span><br><span class="line">    like: 88,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 1,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '30009257',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '黑马前端',</span><br><span class="line">    },</span><br><span class="line">    content: '学前端就来黑马',</span><br><span class="line">    ctime: '10-19 09:00',</span><br><span class="line">    like: 66,</span><br><span class="line">  },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 当前登录用户信息</span><br><span class="line">const user = {</span><br><span class="line">  // 用户id</span><br><span class="line">  uid: '30009257',</span><br><span class="line">  // 用户头像</span><br><span class="line">  avatar,</span><br><span class="line">  // 用户昵称</span><br><span class="line">  uname: '黑马前端',</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 导航 Tab 的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 渲染导航 Tab 和高亮</span><br><span class="line"> * 2. 评论列表排序</span><br><span class="line"> *  最热 =&gt; 喜欢数量降序</span><br><span class="line"> *  最新 =&gt; 创建时间降序</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 导航 Tab 数组</span><br><span class="line">const tabs = [</span><br><span class="line">  { type: 'hot', text: '最热' },</span><br><span class="line">  { type: 'time', text: '最新' },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">const App = () =&gt; {</span><br><span class="line"></span><br><span class="line">  // 渲染评论列表</span><br><span class="line">  // 1.使用 useState 维护 list</span><br><span class="line">  // const [commentList, setCommentList] = useState(_.orderBy(list, 'like', 'desc'));</span><br><span class="line"></span><br><span class="line">  // 获取接口数据渲染</span><br><span class="line">  const [commentList, setCommentList] = useState([]);</span><br><span class="line"></span><br><span class="line">  useEffect(  () =&gt; {</span><br><span class="line">    // 请求数据</span><br><span class="line">    async function getList() {</span><br><span class="line">      // axios 请求数据</span><br><span class="line">      const res = await axios.get('http://localhost:3004/list');</span><br><span class="line">      setCommentList(res.data);</span><br><span class="line">    }</span><br><span class="line">    getList();</span><br><span class="line">  }, []);</span><br><span class="line"></span><br><span class="line">  const inputRef = useRef(null);</span><br><span class="line"></span><br><span class="line">  // 删除功能</span><br><span class="line">  const handleDel = (id) =&gt; {</span><br><span class="line">    // 对 commentList 进行过滤</span><br><span class="line">    setCommentList(commentList.filter(item =&gt; item.rpid !== id));</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // tab 切换功能</span><br><span class="line">  // 1.点击谁就把谁的 type 记录下来</span><br><span class="line">  // 2.通过记录 type 和每一项遍历时的 type 做匹配 控制激活类名的显示</span><br><span class="line">  const [type, setType] = useState('hot');</span><br><span class="line">  const handleTabChange = (type) =&gt; {</span><br><span class="line">    console.log(type);</span><br><span class="line">    setType(type);</span><br><span class="line">    // 基于列表的排序</span><br><span class="line">    if (type === 'hot') {</span><br><span class="line">      // 根据点赞数量排序</span><br><span class="line">      // lodash</span><br><span class="line">      setCommentList(_.orderBy(commentList, 'like', 'desc'));</span><br><span class="line">    } else {</span><br><span class="line">      // 根据创建时间排序</span><br><span class="line">      setCommentList(_.orderBy(commentList, 'ctime', 'desc'))</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // 发表评论</span><br><span class="line">  const [content, setContent] = useState('');</span><br><span class="line">  const handlePublish = () =&gt; {</span><br><span class="line">    setCommentList([</span><br><span class="line">      ...commentList,</span><br><span class="line">      {</span><br><span class="line">        rpid: uuidV4(),</span><br><span class="line">        user: {</span><br><span class="line">          uid: '30009257',</span><br><span class="line">          avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">          uname: '黑马前端',</span><br><span class="line">        },</span><br><span class="line">        content: content,</span><br><span class="line">        ctime: dayjs(new Date()).format('MM-DD hh:mm'),</span><br><span class="line">        like: 80,</span><br><span class="line">      }</span><br><span class="line">      ]);</span><br><span class="line">    // 1.清楚输入框内容</span><br><span class="line">    setContent('')</span><br><span class="line">    // 2.重新聚焦</span><br><span class="line">    inputRef.current.focus();</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="app"&gt;</span><br><span class="line">      {/* 导航 Tab */}</span><br><span class="line">      &lt;div className="reply-navigation"&gt;</span><br><span class="line">        &lt;ul className="nav-bar"&gt;</span><br><span class="line">          &lt;li className="nav-title"&gt;</span><br><span class="line">            &lt;span className="nav-title-text"&gt;评论&lt;/span&gt;</span><br><span class="line">            {/* 评论数量 */}</span><br><span class="line">            &lt;span className="total-reply"&gt;{10}&lt;/span&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li className="nav-sort"&gt;</span><br><span class="line">            {/* 高亮类名： active */}</span><br><span class="line">            {tabs.map(item =&gt;</span><br><span class="line">                &lt;span key={item.type}</span><br><span class="line">                      onClick={() =&gt; handleTabChange(item.type)}</span><br><span class="line">                      className={classNames('nav-item', {active: type === item.type})}&gt;</span><br><span class="line">                  {item.text}</span><br><span class="line">                &lt;/span&gt;)</span><br><span class="line">            }</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div className="reply-wrap"&gt;</span><br><span class="line">        {/* 发表评论 */}</span><br><span class="line">        &lt;div className="box-normal"&gt;</span><br><span class="line">          {/* 当前用户头像 */}</span><br><span class="line">          &lt;div className="reply-box-avatar"&gt;</span><br><span class="line">            &lt;div className="bili-avatar"&gt;</span><br><span class="line">              &lt;img className="bili-avatar-img" src={avatar} alt="用户头像" /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div className="reply-box-wrap"&gt;</span><br><span class="line">            {/* 评论框 */}</span><br><span class="line">            &lt;textarea</span><br><span class="line">              className="reply-box-textarea"</span><br><span class="line">              placeholder="发一条友善的评论"</span><br><span class="line">              value={content}</span><br><span class="line">              onChange={(e) =&gt; setContent(e.target.value)}</span><br><span class="line">              ref={inputRef}</span><br><span class="line">            /&gt;</span><br><span class="line">            {/* 发布按钮 */}</span><br><span class="line">            &lt;div className="reply-box-send"&gt;</span><br><span class="line">              &lt;div className="send-text" onClick={handlePublish}&gt;发布&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        {/* 评论列表 */}</span><br><span class="line">        &lt;div className="reply-list"&gt;</span><br><span class="line">          {/* 评论项 */}</span><br><span class="line">          {commentList.map(item =&gt; (</span><br><span class="line">              &lt;div key={item.rpid} className="reply-item"&gt;</span><br><span class="line">                {/* 头像 */}</span><br><span class="line">                &lt;div className="root-reply-avatar"&gt;</span><br><span class="line">                  &lt;div className="bili-avatar"&gt;</span><br><span class="line">                    &lt;img</span><br><span class="line">                        className="bili-avatar-img"</span><br><span class="line">                        alt=""</span><br><span class="line">                        src={item.user.avatar}</span><br><span class="line">                    /&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div className="content-wrap"&gt;</span><br><span class="line">                  {/* 用户名 */}</span><br><span class="line">                  &lt;div className="user-info"&gt;</span><br><span class="line">                    &lt;div className="user-name"&gt;{item.user.uname}&lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  {/* 评论内容 */}</span><br><span class="line">                  &lt;div className="root-reply"&gt;</span><br><span class="line">                    &lt;span className="reply-content"&gt;{item.content}&lt;/span&gt;</span><br><span class="line">                    &lt;div className="reply-info"&gt;</span><br><span class="line">                      {/* 评论时间 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;{item.ctime}&lt;/span&gt;</span><br><span class="line">                      {/* 评论数量 */}</span><br><span class="line">                      &lt;span className="reply-time"&gt;点赞数:{item.like}&lt;/span&gt;</span><br><span class="line">                      {/*条件：user.id === item.user.id*/}</span><br><span class="line">                      {user.uid === item.user.uid  &amp;&amp; &lt;span className="delete-btn" onClick={() =&gt; handleDel(item.rpid)}&gt;删除&lt;/span&gt;}</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">          ))}</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="封装评论项-Item-组件"><a href="#封装评论项-Item-组件" class="headerlink" title="封装评论项 Item 组件"></a>封装评论项 Item 组件</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><span class="line">import './App.scss'</span><br><span class="line">import avatar from './images/bozai.png'</span><br><span class="line">import {useEffect, useRef, useState} from "react";</span><br><span class="line">import _ from 'lodash';</span><br><span class="line">import classNames from "classnames";</span><br><span class="line">import {v4 as uuidV4} from 'uuid'</span><br><span class="line">import dayjs from "dayjs";</span><br><span class="line">import axios from "axios";</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 评论列表的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 根据状态渲染评论列表</span><br><span class="line"> * 2. 删除评论</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 评论列表数据</span><br><span class="line">const list = [</span><br><span class="line">  {</span><br><span class="line">    // 评论id</span><br><span class="line">    rpid: 3,</span><br><span class="line">    // 用户信息</span><br><span class="line">    user: {</span><br><span class="line">      uid: '13258165',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '周杰伦',</span><br><span class="line">    },</span><br><span class="line">    // 评论内容</span><br><span class="line">    content: '哎哟，不错哦',</span><br><span class="line">    // 评论时间</span><br><span class="line">    ctime: '10-20 08:15',</span><br><span class="line">    like: 38,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 2,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '36080105',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '许嵩',</span><br><span class="line">    },</span><br><span class="line">    content: '我寻你千百度 日出到迟暮',</span><br><span class="line">    ctime: '09-13 11:29',</span><br><span class="line">    like: 88,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    rpid: 1,</span><br><span class="line">    user: {</span><br><span class="line">      uid: '30009257',</span><br><span class="line">      avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">      uname: '黑马前端',</span><br><span class="line">    },</span><br><span class="line">    content: '学前端就来黑马',</span><br><span class="line">    ctime: '10-19 09:00',</span><br><span class="line">    like: 66,</span><br><span class="line">  },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 当前登录用户信息</span><br><span class="line">const user = {</span><br><span class="line">  // 用户id</span><br><span class="line">  uid: '30009257',</span><br><span class="line">  // 用户头像</span><br><span class="line">  avatar,</span><br><span class="line">  // 用户昵称</span><br><span class="line">  uname: '黑马前端',</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 导航 Tab 的渲染和操作</span><br><span class="line"> *</span><br><span class="line"> * 1. 渲染导航 Tab 和高亮</span><br><span class="line"> * 2. 评论列表排序</span><br><span class="line"> *  最热 =&gt; 喜欢数量降序</span><br><span class="line"> *  最新 =&gt; 创建时间降序</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">// 导航 Tab 数组</span><br><span class="line">const tabs = [</span><br><span class="line">  { type: 'hot', text: '最热' },</span><br><span class="line">  { type: 'time', text: '最新' },</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">// 封装请求数据的 Hook</span><br><span class="line">function useGetList() {</span><br><span class="line">  // 获取接口数据渲染</span><br><span class="line">  const [commentList, setCommentList] = useState([]);</span><br><span class="line"></span><br><span class="line">  useEffect(  () =&gt; {</span><br><span class="line">    // 请求数据</span><br><span class="line">    async function getList() {</span><br><span class="line">      // axios 请求数据</span><br><span class="line">      const res = await axios.get('http://localhost:3004/list');</span><br><span class="line">      setCommentList(res.data);</span><br><span class="line">    }</span><br><span class="line">    getList();</span><br><span class="line">  }, []);</span><br><span class="line">  return {</span><br><span class="line">    commentList,</span><br><span class="line">    setCommentList</span><br><span class="line">  };</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// 评论项组件</span><br><span class="line">function Item({ item, onDel }) {</span><br><span class="line">  return (</span><br><span class="line">      &lt;div className="reply-item"&gt;</span><br><span class="line">        {/* 头像 */}</span><br><span class="line">        &lt;div className="root-reply-avatar"&gt;</span><br><span class="line">          &lt;div className="bili-avatar"&gt;</span><br><span class="line">            &lt;img</span><br><span class="line">                className="bili-avatar-img"</span><br><span class="line">                alt=""</span><br><span class="line">                src={item.user.avatar}</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div className="content-wrap"&gt;</span><br><span class="line">          {/* 用户名 */}</span><br><span class="line">          &lt;div className="user-info"&gt;</span><br><span class="line">            &lt;div className="user-name"&gt;{item.user.uname}&lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          {/* 评论内容 */}</span><br><span class="line">          &lt;div className="root-reply"&gt;</span><br><span class="line">            &lt;span className="reply-content"&gt;{item.content}&lt;/span&gt;</span><br><span class="line">            &lt;div className="reply-info"&gt;</span><br><span class="line">              {/* 评论时间 */}</span><br><span class="line">              &lt;span className="reply-time"&gt;{item.ctime}&lt;/span&gt;</span><br><span class="line">              {/* 评论数量 */}</span><br><span class="line">              &lt;span className="reply-time"&gt;点赞数:{item.like}&lt;/span&gt;</span><br><span class="line">              {/*条件：user.id === item.user.id*/}</span><br><span class="line">              {user.uid === item.user.uid  &amp;&amp; &lt;span className="delete-btn" onClick={() =&gt; onDel(item.rpid)}&gt;删除&lt;/span&gt;}</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">const App = () =&gt; {</span><br><span class="line"></span><br><span class="line">  // 渲染评论列表</span><br><span class="line">  // 1.使用 useState 维护 list</span><br><span class="line">  // const [commentList, setCommentList] = useState(_.orderBy(list, 'like', 'desc'));</span><br><span class="line"></span><br><span class="line">  const { commentList, setCommentList } = useGetList();</span><br><span class="line"></span><br><span class="line">  const inputRef = useRef(null);</span><br><span class="line"></span><br><span class="line">  // 删除功能</span><br><span class="line">  const handleDel = (id) =&gt; {</span><br><span class="line">    // 对 commentList 进行过滤</span><br><span class="line">    setCommentList(commentList.filter(item =&gt; item.rpid !== id));</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // tab 切换功能</span><br><span class="line">  // 1.点击谁就把谁的 type 记录下来</span><br><span class="line">  // 2.通过记录 type 和每一项遍历时的 type 做匹配 控制激活类名的显示</span><br><span class="line">  const [type, setType] = useState('hot');</span><br><span class="line">  const handleTabChange = (type) =&gt; {</span><br><span class="line">    console.log(type);</span><br><span class="line">    setType(type);</span><br><span class="line">    // 基于列表的排序</span><br><span class="line">    if (type === 'hot') {</span><br><span class="line">      // 根据点赞数量排序</span><br><span class="line">      // lodash</span><br><span class="line">      setCommentList(_.orderBy(commentList, 'like', 'desc'));</span><br><span class="line">    } else {</span><br><span class="line">      // 根据创建时间排序</span><br><span class="line">      setCommentList(_.orderBy(commentList, 'ctime', 'desc'))</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // 发表评论</span><br><span class="line">  const [content, setContent] = useState('');</span><br><span class="line">  const handlePublish = () =&gt; {</span><br><span class="line">    setCommentList([</span><br><span class="line">      ...commentList,</span><br><span class="line">      {</span><br><span class="line">        rpid: uuidV4(),</span><br><span class="line">        user: {</span><br><span class="line">          uid: '30009257',</span><br><span class="line">          avatar: 'https://www.keaitupian.cn/cjpic/frombd/0/253/936677050/470164789.jpg',</span><br><span class="line">          uname: '黑马前端',</span><br><span class="line">        },</span><br><span class="line">        content: content,</span><br><span class="line">        ctime: dayjs(new Date()).format('MM-DD hh:mm'),</span><br><span class="line">        like: 80,</span><br><span class="line">      }</span><br><span class="line">      ]);</span><br><span class="line">    // 1.清楚输入框内容</span><br><span class="line">    setContent('')</span><br><span class="line">    // 2.重新聚焦</span><br><span class="line">    inputRef.current.focus();</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="app"&gt;</span><br><span class="line">      {/* 导航 Tab */}</span><br><span class="line">      &lt;div className="reply-navigation"&gt;</span><br><span class="line">        &lt;ul className="nav-bar"&gt;</span><br><span class="line">          &lt;li className="nav-title"&gt;</span><br><span class="line">            &lt;span className="nav-title-text"&gt;评论&lt;/span&gt;</span><br><span class="line">            {/* 评论数量 */}</span><br><span class="line">            &lt;span className="total-reply"&gt;{10}&lt;/span&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li className="nav-sort"&gt;</span><br><span class="line">            {/* 高亮类名： active */}</span><br><span class="line">            {tabs.map(item =&gt;</span><br><span class="line">                &lt;span key={item.type}</span><br><span class="line">                      onClick={() =&gt; handleTabChange(item.type)}</span><br><span class="line">                      className={classNames('nav-item', {active: type === item.type})}&gt;</span><br><span class="line">                  {item.text}</span><br><span class="line">                &lt;/span&gt;)</span><br><span class="line">            }</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div className="reply-wrap"&gt;</span><br><span class="line">        {/* 发表评论 */}</span><br><span class="line">        &lt;div className="box-normal"&gt;</span><br><span class="line">          {/* 当前用户头像 */}</span><br><span class="line">          &lt;div className="reply-box-avatar"&gt;</span><br><span class="line">            &lt;div className="bili-avatar"&gt;</span><br><span class="line">              &lt;img className="bili-avatar-img" src={avatar} alt="用户头像" /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div className="reply-box-wrap"&gt;</span><br><span class="line">            {/* 评论框 */}</span><br><span class="line">            &lt;textarea</span><br><span class="line">              className="reply-box-textarea"</span><br><span class="line">              placeholder="发一条友善的评论"</span><br><span class="line">              value={content}</span><br><span class="line">              onChange={(e) =&gt; setContent(e.target.value)}</span><br><span class="line">              ref={inputRef}</span><br><span class="line">            /&gt;</span><br><span class="line">            {/* 发布按钮 */}</span><br><span class="line">            &lt;div className="reply-box-send"&gt;</span><br><span class="line">              &lt;div className="send-text" onClick={handlePublish}&gt;发布&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        {/* 评论列表 */}</span><br><span class="line">        &lt;div className="reply-list"&gt;</span><br><span class="line">          {/* 评论项 */}</span><br><span class="line">          {commentList.map(item =&gt; &lt;Item item={item} onDel={handleDel} /&gt;)}</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>



<h2 id="17-Redux-集中状态管理工具"><a href="#17-Redux-集中状态管理工具" class="headerlink" title="17. Redux 集中状态管理工具"></a>17. Redux 集中状态管理工具</h2><p>Redux 是 React 最常用的<strong>集中状态管理工具</strong>，类似于 Vue 中的 Pinia（Vuex），<strong>可以独立于框架运行</strong></p>
<p>作用：通过集中管理的方式管理应用的状态</p>
<p>使用步骤：</p>
<ol>
<li>定义一个 Redux 函数</li>
<li>使用 createStore 方法传入 reducer 函数，生成一个 store 实例对象</li>
<li>使用 store 实例的 subscribe 方法订阅数据的变化（数据一旦变化，可以得到通知）</li>
<li>使用 store 实例的 dispatch方法提交 action 对象触发数据变化（告诉 reducer 你想怎么改数据)</li>
<li>使用 store 实例的 getState 方法获取最新的状态数据更新到视图中</li>
</ol>
<h3 id="Redux-与-React环境准备"><a href="#Redux-与-React环境准备" class="headerlink" title="Redux 与 React环境准备"></a>Redux 与 React环境准备</h3><p><strong>配套工具</strong></p>
<ol>
<li>Redux Toolkit — 官方推荐编写 Redux 逻辑的方式，是一套工具的集合，简化书写方式<ul>
<li>简化 store 配置</li>
<li>内置 immer 支持可变式状态修改</li>
<li>内置 thunk，更好的异步创建</li>
</ul>
</li>
<li>react-redux — 用来链接 <strong>Redux 和 React 组件</strong>的中间件<ul>
<li>获取状态，更新状态</li>
</ul>
</li>
</ol>
<p><strong>配置基础环境</strong></p>
<ol>
<li>使用CRA快速创建React项目</li>
</ol>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app react-redux</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li><p>安装配套工具</p>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @reduxjs/toolkit react-redux</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>启动项目</p>
</li>
</ol>
  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></tbody></table></figure>



<h3 id="使用-React-Toolkit-创建-counterStore"><a href="#使用-React-Toolkit-创建-counterStore" class="headerlink" title="使用 React Toolkit 创建 counterStore"></a><strong>使用 React Toolkit 创建 counterStore</strong></h3><p>counterStore.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {createSlice} <span class="keyword">from</span> <span class="string">"@reduxjs/toolkit"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">createSlice</span>({</span><br><span class="line">    <span class="comment">// store 名称</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">'counter'</span>,</span><br><span class="line">    <span class="comment">// 初始化状态</span></span><br><span class="line">    <span class="attr">initialState</span>: {</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// 修改状态的方法，同步方法，支持直接修改</span></span><br><span class="line">    <span class="attr">reducers</span>: {</span><br><span class="line">        <span class="title function_">increment</span>(<span class="params">state</span>) {</span><br><span class="line">            state.<span class="property">count</span>++;</span><br><span class="line">        },</span><br><span class="line">        <span class="title function_">decrement</span>(<span class="params">state</span>) {</span><br><span class="line">            state.<span class="property">count</span>--;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构出来 actionCreator 函数</span></span><br><span class="line"><span class="keyword">const</span> {increment, decrement} = counterStore.<span class="property">actions</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reducer = counterStore.<span class="property">reducer</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按需导出 actionCreator</span></span><br><span class="line"><span class="keyword">export</span> {increment, decrement};</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认导出 reducer</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> reducer;</span><br></pre></td></tr></tbody></table></figure>

<p>src\store\index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {configureStore} <span class="keyword">from</span> <span class="string">"@reduxjs/toolkit"</span>;</span><br><span class="line"><span class="keyword">import</span> counterStore <span class="keyword">from</span> <span class="string">"./modules/counterStore"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">configureStore</span>({</span><br><span class="line">    <span class="attr">reducer</span>: {</span><br><span class="line">        <span class="attr">counter</span>: counterStore</span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></tbody></table></figure>

<p>src\index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">'react-dom/client'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">'./App'</span>;</span><br><span class="line"><span class="keyword">import</span> reportWebVitals <span class="keyword">from</span> <span class="string">'./reportWebVitals'</span>;</span><br><span class="line"><span class="keyword">import</span> {<span class="title class_">Provider</span>} <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">"./store"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">'root'</span>));</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">{store}</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// If you want to start measuring performance in your app, pass a function</span></span><br><span class="line"><span class="comment">// to log results (for example: reportWebVitals(console.log))</span></span><br><span class="line"><span class="comment">// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals</span></span><br><span class="line"><span class="title function_">reportWebVitals</span>();</span><br></pre></td></tr></tbody></table></figure>

<p>React 组件使用 store 中的数据</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> { count } = <span class="title function_">useSelector</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">counter</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>React 组件修改 store 中的数据</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./App.css'</span>;</span><br><span class="line"><span class="keyword">import</span> {useDispatch, useSelector} <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"><span class="comment">// 导入 actionCreator</span></span><br><span class="line"><span class="keyword">import</span> {decrement, increment} <span class="keyword">from</span> <span class="string">"./store/modules/counterStore"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) {</span><br><span class="line">  <span class="keyword">const</span> { count } = <span class="title function_">useSelector</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">counter</span>);</span><br><span class="line">  <span class="keyword">const</span> dispatch = <span class="title function_">useDispatch</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"App"</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">{()</span> =&gt;</span> dispatch(decrement())}&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>{count}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">{()</span> =&gt;</span> dispatch(increment())}&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>总结：</p>
<img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240713175536.png" alt="image-20240713175536468" style="zoom: 50%;">

<p><strong>提交 action</strong> 修改 state 值</p>
<p>counterStore.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {createSlice} <span class="keyword">from</span> <span class="string">"@reduxjs/toolkit"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">createSlice</span>({</span><br><span class="line">    <span class="comment">// store 名称</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">'counter'</span>,</span><br><span class="line">    <span class="comment">// 初始化状态</span></span><br><span class="line">    <span class="attr">initialState</span>: {</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// 修改状态的方法，同步方法，支持直接修改</span></span><br><span class="line">    <span class="attr">reducers</span>: {</span><br><span class="line">        <span class="title function_">increment</span>(<span class="params">state</span>) {</span><br><span class="line">            state.<span class="property">count</span>++;</span><br><span class="line">        },</span><br><span class="line">        <span class="title function_">decrement</span>(<span class="params">state</span>) {</span><br><span class="line">            state.<span class="property">count</span>--;</span><br><span class="line">        },</span><br><span class="line">        <span class="title function_">addToNum</span>(<span class="params">state, action</span>) {</span><br><span class="line">            state.<span class="property">count</span> += action.<span class="property">payload</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构出来 actionCreator 函数</span></span><br><span class="line"><span class="keyword">const</span> {increment, decrement, addToNum} = counterStore.<span class="property">actions</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reducer = counterStore.<span class="property">reducer</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按需导出 actionCreator</span></span><br><span class="line"><span class="keyword">export</span> { increment, decrement, addToNum };</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认导出 reducer</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> reducer;</span><br></pre></td></tr></tbody></table></figure>

<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import './App.css';</span><br><span class="line">import {useDispatch, useSelector} from "react-redux";</span><br><span class="line">// 导入 actionCreator</span><br><span class="line">import {addToNum, decrement, increment} from "./store/modules/counterStore";</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">  const { count } = useSelector(state =&gt; state.counter);</span><br><span class="line">  const dispatch = useDispatch();</span><br><span class="line">	</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">          &lt;button onClick={() =&gt; dispatch(decrement())}&gt;-&lt;/button&gt;</span><br><span class="line">          &lt;span&gt;{count}&lt;/span&gt;</span><br><span class="line">          &lt;button onClick={() =&gt; dispatch(increment())}&gt;+&lt;/button&gt;</span><br><span class="line">        &lt;button onClick={() =&gt; dispatch(addToNum(10))}&gt;add to 10&lt;/button&gt;</span><br><span class="line">        &lt;button onClick={() =&gt; dispatch(addToNum(20))}&gt;add to 20&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="Redux-异步状态操作"><a href="#Redux-异步状态操作" class="headerlink" title="Redux 异步状态操作"></a>Redux 异步状态操作</h3><p>异步操作样板：</p>
<ol>
<li>创建stor的写法保持不变，配置好同步修改状态的方法</li>
<li>单独封装一个函数，在函数内部return一个新函数，在新函数中<ol>
<li>封装异步请求获取数据</li>
<li>调用同步action Creater传入异步数据生成一个action对象，并使用dispatch提交</li>
</ol>
</li>
<li>组件中dispatch的写法保特不变</li>
</ol>
<p>channelStore.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {createSlice} <span class="keyword">from</span> <span class="string">"@reduxjs/toolkit"</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> channelStore = <span class="title function_">createSlice</span>({</span><br><span class="line">    <span class="comment">// store 名称</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">'channel'</span>,</span><br><span class="line">    <span class="attr">initialState</span>: {</span><br><span class="line">        <span class="attr">channelList</span>: []</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">reducers</span>: {</span><br><span class="line">        <span class="title function_">setChannels</span>(<span class="params">state, action</span>) {</span><br><span class="line">            state.<span class="property">channelList</span> = action.<span class="property">payload</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步请求部分</span></span><br><span class="line"><span class="keyword">const</span> { setChannels } = channelStore.<span class="property">actions</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fetchChannelList</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">async</span> (dispatch) =&gt; {</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">'http://geek.itheima.net/v1_0/channels'</span>);</span><br><span class="line">        <span class="title function_">dispatch</span>(<span class="title function_">setChannels</span>(res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">channels</span>));</span><br><span class="line">    };</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> { fetchChannelList };</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reducer = channelStore.<span class="property">reducer</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> reducer;</span><br></pre></td></tr></tbody></table></figure>

<p>index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {configureStore} <span class="keyword">from</span> <span class="string">"@reduxjs/toolkit"</span>;</span><br><span class="line"><span class="keyword">import</span> counterStore <span class="keyword">from</span> <span class="string">"./modules/counterStore"</span>;</span><br><span class="line"><span class="keyword">import</span> channelStore <span class="keyword">from</span> <span class="string">"./modules/channelStore"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">configureStore</span>({</span><br><span class="line">    <span class="attr">reducer</span>: {</span><br><span class="line">        <span class="attr">counter</span>: counterStore,</span><br><span class="line">        <span class="attr">channel</span>: channelStore,</span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></tbody></table></figure>

<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import {useDispatch, useSelector} from "react-redux";</span><br><span class="line">// 导入 actionCreator</span><br><span class="line">import {addToNum, decrement, increment} from "./store/modules/counterStore";</span><br><span class="line">import {useEffect} from "react";</span><br><span class="line">import {fetchChannelList} from "./store/modules/channelStore";</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">  const { count } = useSelector(state =&gt; state.counter);</span><br><span class="line">  const { channelList } = useSelector(state =&gt; state.channel);</span><br><span class="line">  const dispatch = useDispatch();</span><br><span class="line"></span><br><span class="line">  useEffect(() =&gt; {</span><br><span class="line">      dispatch(fetchChannelList());</span><br><span class="line">  }, [dispatch]);</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div className="App"&gt;</span><br><span class="line">          &lt;button onClick={() =&gt; dispatch(decrement())}&gt;-&lt;/button&gt;</span><br><span class="line">          &lt;span&gt;{count}&lt;/span&gt;</span><br><span class="line">          &lt;button onClick={() =&gt; dispatch(increment())}&gt;+&lt;/button&gt;</span><br><span class="line">        &lt;button onClick={() =&gt; dispatch(addToNum(10))}&gt;add to 10&lt;/button&gt;</span><br><span class="line">        &lt;button onClick={() =&gt; dispatch(addToNum(20))}&gt;add to 20&lt;/button&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            {channelList.map(item =&gt; &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;)}</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>



<h2 id="18-React-Router-路由"><a href="#18-React-Router-路由" class="headerlink" title="18. React Router 路由"></a>18. React Router 路由</h2><h3 id="上手-demo"><a href="#上手-demo" class="headerlink" title="上手 demo"></a>上手 demo</h3><p>需求：创建一个可以切换登录和文章页的路由</p>
<p><strong>实现：</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i react-router-dom <span class="comment"># 安装路由依赖</span></span><br></pre></td></tr></tbody></table></figure>

<p>index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">'react-dom/client'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span>;</span><br><span class="line"><span class="keyword">import</span> reportWebVitals <span class="keyword">from</span> <span class="string">'./reportWebVitals'</span>;</span><br><span class="line"><span class="keyword">import</span> {createBrowserRouter, <span class="title class_">RouterProvider</span>} <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 创建 Router 实例对象并且配置路由对应关系</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是登录页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/article'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是文章页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    },</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">'root'</span>));</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">RouterProvider</span> <span class="attr">router</span>=<span class="string">{router}</span>&gt;</span><span class="tag">&lt;/<span class="name">RouterProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// If you want to start measuring performance in your app, pass a function</span></span><br><span class="line"><span class="comment">// to log results (for example: reportWebVitals(console.log))</span></span><br><span class="line"><span class="comment">// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals</span></span><br><span class="line"><span class="title function_">reportWebVitals</span>();</span><br></pre></td></tr></tbody></table></figure>



<h3 id="实际开发中的-router-配置"><a href="#实际开发中的-router-配置" class="headerlink" title="实际开发中的 router 配置"></a>实际开发中的 router 配置</h3><p>1.创建 page 文件夹，分别创建 Login 和 Article 目录，再分别创建 index.js 文件</p>
<p>src/page/article/index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Article</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是文章<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Article</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>src/page/login/index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Login</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是登录<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Login</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>2.创建 router 文件夹，在其中创建 index.js 文件</p>
<p>router/index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {createBrowserRouter} <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">"../page/login"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Article</span> <span class="keyword">from</span> <span class="string">"../page/article"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/article'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Article</span> /&gt;</span></span></span><br><span class="line">    }</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></tbody></table></figure>



<p>3.在 src/index.js 文件中引入 router 实例</p>
<p>src/index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">'react-dom/client'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span>;</span><br><span class="line"><span class="keyword">import</span> reportWebVitals <span class="keyword">from</span> <span class="string">'./reportWebVitals'</span>;</span><br><span class="line"><span class="keyword">import</span> {createBrowserRouter, <span class="title class_">RouterProvider</span>} <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">'root'</span>));</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">RouterProvider</span> <span class="attr">router</span>=<span class="string">{router}</span>&gt;</span><span class="tag">&lt;/<span class="name">RouterProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="title function_">reportWebVitals</span>();</span><br></pre></td></tr></tbody></table></figure>



<h3 id="路由导航"><a href="#路由导航" class="headerlink" title="路由导航"></a>路由导航</h3><h4 id="声明式导航"><a href="#声明式导航" class="headerlink" title="声明式导航"></a>声明式导航</h4><p>指的是在模板中通过 <code>&lt;Link /&gt;</code> 组件描述要调到哪里去，常用于 Tab 栏。类似 Vue 的 <code>router-link</code></p>
<p>示例：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Link</span> to=<span class="string">"/article"</span>&gt;文章&lt;/<span class="title class_">Link</span>&gt;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h4><p>编程式导航是指通过<code>useNavigate</code>钩子得到导航方法，然后通过调用方法以命令式的形式进行路由跳转，比如想在<br>登录请求完毕之后跳转就可以选择这种方式，更加灵活</p>
<p>示例：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {<span class="title class_">Link</span>, useNavigate} <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Login</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">    <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>();</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>我是登录<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/article'</span>&gt;</span>跳转文章页<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">{()</span> =&gt;</span> navigate('/article')}&gt;跳转文章页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Login</span>;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="路由传参"><a href="#路由传参" class="headerlink" title="路由传参"></a>路由传参</h3><h4 id="searchParams-传参"><a href="#searchParams-传参" class="headerlink" title="searchParams 传参"></a>searchParams 传参</h4><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传参</span></span><br><span class="line"><span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>();</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">{()</span> =&gt;</span> navigate('/article?id=1001&amp;name=jack')}&gt;searchParams 传参<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 拿参</span></span><br><span class="line"><span class="keyword">const</span> [params] = <span class="title function_">useSearchParams</span>();</span><br><span class="line"><span class="keyword">const</span> id = params.<span class="title function_">get</span>(<span class="string">'id'</span>);</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是文章页{id}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="params-传参"><a href="#params-传参" class="headerlink" title="params 传参"></a>params 传参</h4><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传参</span></span><br><span class="line"><span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>();</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">{()</span> =&gt;</span> navigate('/article/1001')}&gt;params 传参<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 取参</span></span><br><span class="line"><span class="keyword">const</span> params = <span class="title function_">useParams</span>();</span><br><span class="line"><span class="keyword">const</span> id = params.<span class="property">id</span>;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是文章页{id}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>注意 parmas 传参必须要在 router/index.js 文件的 path 加上 :id</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {createBrowserRouter} <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">"../page/login"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Article</span> <span class="keyword">from</span> <span class="string">"../page/article"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/article/:id'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Article</span> /&gt;</span></span></span><br><span class="line">    }</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></tbody></table></figure>



<p><strong>传参多值：</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传参</span></span><br><span class="line"><span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>();</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">{()</span> =&gt;</span> navigate('/article?id=1001&amp;name=jack')}&gt;searchParams 传参<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">{()</span> =&gt;</span> navigate('/article/1001/hejiajun')}&gt;params 传参<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 取参</span></span><br><span class="line"><span class="keyword">const</span> params = <span class="title function_">useParams</span>();</span><br><span class="line"><span class="keyword">const</span> id = params.<span class="property">id</span>;</span><br><span class="line"><span class="keyword">const</span> name = params.<span class="property">name</span>;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是文章页{id}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是文章页{name}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>router/index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {createBrowserRouter} <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">"../page/login"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Article</span> <span class="keyword">from</span> <span class="string">"../page/article"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/article/:id/:name'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Article</span> /&gt;</span></span></span><br><span class="line">    }</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="嵌套路由配置"><a href="#嵌套路由配置" class="headerlink" title="嵌套路由配置"></a>嵌套路由配置</h3><p>大致步骤：</p>
<ol>
<li>使用 children 属性配置路由嵌套关系</li>
<li>使用 <outlet> 组件配置二级路由渲染位置</outlet></li>
</ol>
<p>router/index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {createBrowserRouter} <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">"../page/login"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Article</span> <span class="keyword">from</span> <span class="string">"../page/article"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Layout</span> <span class="keyword">from</span> <span class="string">"../page/layout"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Board</span> <span class="keyword">from</span> <span class="string">"../page/board"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">"../page/about"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> /&gt;</span></span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'board'</span>,</span><br><span class="line">                <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Board</span> /&gt;</span></span></span><br><span class="line">            },</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'about'</span>,</span><br><span class="line">                <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">About</span> /&gt;</span></span></span><br><span class="line">            }</span><br><span class="line">        ]</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/article/:id/:name'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Article</span> /&gt;</span></span></span><br><span class="line">    }</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></tbody></table></figure>

<p>src/page/layout/index.js：</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {<span class="title class_">Link</span>, <span class="title class_">Outlet</span>} <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Layout</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            我是一级路由 layout 组件</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/board'</span>&gt;</span>面板<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/about'</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            {/*配置二级路由的出口*/}</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Outlet</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Layout</span>;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="默认二级路由设置"><a href="#默认二级路由设置" class="headerlink" title="默认二级路由设置"></a>默认二级路由设置</h3><p>当访问的是一级路由时，默认的二级路由组件可以得到渲染，只需要在二级路由的位置去掉path，设置 index 属性为 true</p>
<p>src/router/index.js</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {createBrowserRouter} <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">"../page/login"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Article</span> <span class="keyword">from</span> <span class="string">"../page/article"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Layout</span> <span class="keyword">from</span> <span class="string">"../page/layout"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Board</span> <span class="keyword">from</span> <span class="string">"../page/board"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">"../page/about"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> /&gt;</span></span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            <span class="comment">// 设置默认二级路由，一级路由被访问的时候，它也能得到渲染</span></span><br><span class="line">            {</span><br><span class="line">                <span class="attr">index</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Board</span> /&gt;</span></span></span><br><span class="line">            },</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'about'</span>,</span><br><span class="line">                <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">About</span> /&gt;</span></span></span><br><span class="line">            }</span><br><span class="line">        ]</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/article/:id/:name'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Article</span> /&gt;</span></span></span><br><span class="line">    }</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="404-路由配置"><a href="#404-路由配置" class="headerlink" title="404 路由配置"></a>404 路由配置</h3><p>场景：当浏览器输入url的路径在整个路由配置中都找不到对应的pth,为了用户体验，可以使用404兜底组件进行<br>渲染</p>
<h3 id="两种路由模式"><a href="#两种路由模式" class="headerlink" title="两种路由模式"></a>两种路由模式</h3><p><img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240714111532.png" alt="image-20240714111532334"></p>
<p><strong>创建 hash 路由</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {createHashRouter} <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">"../page/login"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Article</span> <span class="keyword">from</span> <span class="string">"../page/article"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Layout</span> <span class="keyword">from</span> <span class="string">"../page/layout"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Board</span> <span class="keyword">from</span> <span class="string">"../page/board"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">"../page/about"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NotFound</span> <span class="keyword">from</span> <span class="string">"../page/notfound"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createHashRouter</span>([</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> /&gt;</span></span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            <span class="comment">// 设置默认二级路由，一级路由被访问的时候，它也能得到渲染</span></span><br><span class="line">            {</span><br><span class="line">                <span class="attr">index</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Board</span> /&gt;</span></span></span><br><span class="line">            },</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'about'</span>,</span><br><span class="line">                <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">About</span> /&gt;</span></span></span><br><span class="line">            }</span><br><span class="line">        ]</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/article/:id/:name'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Article</span> /&gt;</span></span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'*'</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">NotFound</span> /&gt;</span></span></span><br><span class="line">    }</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></tbody></table></figure>



<h2 id="19-记账本"><a href="#19-记账本" class="headerlink" title="19. 记账本"></a><del>19. 记账本</del></h2><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><p>使用CRA创建项目，并安装必要依赖，包括下列基础包</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app react-bill</span><br></pre></td></tr></tbody></table></figure>

<ol>
<li>Redux:状态管理-@reduxjs./toolkit、react-redux</li>
<li>路由-reac-router-dom</li>
<li>时间处理-dayjs</li>
<li>class:类名处理-classnames</li>
<li>移动端组件库-antd-mobile</li>
<li>请求插件-axios</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @reduxjs/toolkit react-redux react-router-dom dayjs classnames antd-mobile axios</span><br></pre></td></tr></tbody></table></figure>



<h3 id="配置别名路径"><a href="#配置别名路径" class="headerlink" title="配置别名路径"></a>配置别名路径</h3><p>1.路径解析配置，把 @/ 解析为 src/ （1. <code>npm i -D @craco/craco</code>  2.项目根目录下创建配置文件<code>craco.config.js</code>）</p>
<p>2.路径联想配置(VsCode),VsCode在输入@/时，自动联想出来对应的src/下的子级目录</p>
<p>数据 Mock</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D json-server</span><br></pre></td></tr></tbody></table></figure>



<h2 id="20-UseReducer"><a href="#20-UseReducer" class="headerlink" title="20. UseReducer"></a>20. UseReducer</h2><p>作用：和 useState 作用类似，用来管理相对复杂的状态数据</p>
<p>基础用法：</p>
<ol>
<li>定义一个reducer函数（根据不同的action返回不同的新状态)</li>
<li>在组件中调用useReducer,并传入reducer函数和状态的初始值</li>
<li>事件发生时，通过 dispatch 函数分派一个 action 对象（通知 reducer 要返回哪个新状态并渲染 UI）</li>
</ol>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import React, {useReducer} from "react";</span><br><span class="line"></span><br><span class="line">// useReducer</span><br><span class="line">// 1. 定义 reducer 函数，根据不同的action返回不同的新状态</span><br><span class="line">// 2. 在组件中调用 useReducer,并传入 reducer 函数和状态的初始值</span><br><span class="line">// 3. 调用 dispatch 通知 reducer 产生一个新状态，利用新状态更新 UI</span><br><span class="line"></span><br><span class="line">function reducer(state, action) {</span><br><span class="line">    switch (action.type) {</span><br><span class="line">        case 'INC':</span><br><span class="line">            return state + 1;</span><br><span class="line">        case 'DEC':</span><br><span class="line">            return state - 1;</span><br><span class="line">        case 'SET':</span><br><span class="line">            return action.payload;</span><br><span class="line">        default:</span><br><span class="line">            return state;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line"></span><br><span class="line">    const [state, dispatch] = useReducer(reducer, 0);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            this is app</span><br><span class="line">            &lt;button onClick={() =&gt; dispatch({ type: 'DEC' })}&gt;-&lt;/button&gt;</span><br><span class="line">            {state}</span><br><span class="line">            &lt;button onClick={() =&gt; dispatch({ type: 'INC' })}&gt;+&lt;/button&gt;</span><br><span class="line">            &lt;button onClick={() =&gt; dispatch({ type: 'SET', payload: 100 })}&gt;update&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>



<h2 id="21-useMemo"><a href="#21-useMemo" class="headerlink" title="21. useMemo"></a>21. useMemo</h2><p>需求：</p>
<img src="https://hejiajun-img-bucket.oss-cn-wuhan-lr.aliyuncs.com/img/20240714123347.png" alt="image-20240714123347346" style="zoom: 60%;">

<p>作用：在组件每次渲染的时候<strong>缓存计算结果</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">    <span class="comment">// 根据 count1 返回计算的结果</span></span><br><span class="line">}, [count1])</span><br></pre></td></tr></tbody></table></figure>

<p>说明：使用useMemo做缓存之后可以保证只有count1依赖项发生变化时才会重新计算。接受两个参数，第一个是函数，第二个是依赖项。</p>
<p>App.js：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import React, {useMemo, useState} from "react";</span><br><span class="line"></span><br><span class="line">function fib(n) {</span><br><span class="line">    console.log('计算函数执行了');</span><br><span class="line">    if (n &lt; 3) {</span><br><span class="line">        return 1;</span><br><span class="line">    }</span><br><span class="line">    return fib(n - 2) + fib(n - 1);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function App() {</span><br><span class="line">    const [count1, setCount1] = useState(0);</span><br><span class="line"></span><br><span class="line">    const result = useMemo(() =&gt; {</span><br><span class="line">        return fib(count1);</span><br><span class="line">    }, [count1]);</span><br><span class="line"></span><br><span class="line">    // const result = fib(count1);</span><br><span class="line">    const [count2, setCount2] = useState(0);</span><br><span class="line">    console.log('组件重新渲染了');</span><br><span class="line">    return (</span><br><span class="line">        &lt;div className="App"&gt;</span><br><span class="line">            this is app</span><br><span class="line">            &lt;button onClick={() =&gt; setCount1(count1 + 1)}&gt;change count1: {count1}&lt;/button&gt;</span><br><span class="line">            &lt;button onClick={() =&gt; setCount2(count2 + 1)}&gt;change count2: {count2}&lt;/button&gt;</span><br><span class="line">            result is {result}</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></tbody></table></figure>

<p>使用场景：消耗非常大的计算</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">雪荷</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/07/06/React-%E7%AC%94%E8%AE%B0/">http://example.com/2024/07/06/React-%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">雪荷的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/React/">React</a></div><div class="post_share"><div class="social-share" data-image="/img/post_2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/07/%E5%BC%95%E5%85%A5%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0%E6%BB%91%E5%8A%A8%E5%8A%A0%E8%BD%BD/" title="引入第三方组件实现滑动加载"><img class="cover" src="/img/post_1.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">引入第三方组件实现滑动加载</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/05/Oracle-%E4%B8%8E-MySQL-%E4%B8%BB%E8%A6%81%E5%B7%AE%E5%BC%82/" title="Oracle 与 MySQL 主要差异"><img class="cover" src="/img/post_2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Oracle 与 MySQL 主要差异</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/09/06/%E9%9D%A2%E8%AF%95%E7%8B%97-interviewdog-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/" title="面试狗 - interviewdog 项目笔记"><img class="cover" src="/img/post_2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-06</div><div class="title">面试狗 - interviewdog 项目笔记</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/ava.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">雪荷</div><div class="author-info__description">热爱生活，热爱编程</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">40</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81React-%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">一、React 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-react-%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.1.</span> <span class="toc-text">1. 创建一个 react 项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-src-%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 src 目录下文件的作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-jsx-%E5%9F%BA%E7%A1%80-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AC%E8%B4%A8"><span class="toc-number">1.2.</span> <span class="toc-text">2. jsx 基础-概念和本质</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-JSX-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 JSX 是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-JSX-%E7%BC%96%E5%86%99-JS-%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 JSX 编写 JS 代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-JSX-%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 JSX 中实现列表渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-JSX-%E5%AE%9E%E7%8E%B0%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 JSX 实现条件渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-JSX-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%E7%9A%84-demo"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">2.4.1 JSX 条件渲染的 demo</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-React-%E5%9F%BA%E7%A1%80%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">1.3.</span> <span class="toc-text">3. React 基础事件绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-React%E7%BB%84%E4%BB%B6"><span class="toc-number">1.4.</span> <span class="toc-text">4.  React组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-useState-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="toc-number">1.5.</span> <span class="toc-text">5. useState 基础使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA-useState-%E7%9A%84%E5%B0%8F-demo"><span class="toc-number">1.5.1.</span> <span class="toc-text">一个 useState 的小 demo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%93%E5%B1%95-demo"><span class="toc-number">1.5.2.</span> <span class="toc-text">拓展 demo</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.6.</span> <span class="toc-text">6. 如何修改组件样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-B-%E7%AB%99%E8%AF%84%E8%AE%BA%E6%A1%88%E4%BE%8B"><span class="toc-number">1.7.</span> <span class="toc-text">7. B 站评论案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 列表渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 删除功能实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E6%B8%B2%E6%9F%93-Tab-%E7%82%B9%E5%87%BB%E9%AB%98%E4%BA%AE%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.7.3.</span> <span class="toc-text">7.3 渲染 Tab + 点击高亮实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E6%8E%92%E5%BA%8F%E5%8A%9F%E8%83%BD"><span class="toc-number">1.7.4.</span> <span class="toc-text">7.4 排序功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#lodash-%E5%BA%93"><span class="toc-number">1.7.4.1.</span> <span class="toc-text">lodash 库</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-classnams-%E4%BC%98%E5%8C%96%E7%B1%BB%E5%90%8D%E6%8E%A7%E5%88%B6"><span class="toc-number">1.8.</span> <span class="toc-text">8. classnams 优化类名控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.8.1.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%8F%97%E8%A1%A8%E5%8D%95%E6%8E%A7%E5%88%B6%E9%A1%B9"><span class="toc-number">1.9.</span> <span class="toc-text">9. 受表单控制项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-React-%E4%B8%AD%E8%8E%B7%E5%8F%96DOM"><span class="toc-number">1.10.</span> <span class="toc-text">10. React 中获取DOM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-B-%E7%AB%99%E8%AF%84%E8%AE%BA%E4%BC%98%E5%8C%96"><span class="toc-number">1.11.</span> <span class="toc-text">11.B 站评论优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E5%8F%91%E8%A1%A8%E8%AF%84%E8%AE%BA"><span class="toc-number">1.11.1.</span> <span class="toc-text">11.1 发表评论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-%E5%8F%91%E8%A1%A8%E8%AF%84%E8%AE%BA%E5%90%8E%E6%B8%85%E9%99%A4%E8%BE%93%E5%85%A5%E6%A1%86%E5%B9%B6%E8%81%9A%E7%84%A6"><span class="toc-number">1.11.2.</span> <span class="toc-text">11.2 发表评论后清除输入框并聚焦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="toc-number">1.12.</span> <span class="toc-text">12. 组件间通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E4%BC%A0%E5%AD%90-props"><span class="toc-number">1.12.1.</span> <span class="toc-text">父传子 props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E4%BC%A0%E5%AD%90-%E7%89%B9%E6%AE%8A%E7%9A%84-prop-children"><span class="toc-number">1.12.2.</span> <span class="toc-text">父传子 特殊的 prop children</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E4%BC%A0%E7%88%B6"><span class="toc-number">1.12.3.</span> <span class="toc-text">子传父</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%8A%B6%E6%80%81%E6%8F%90%E5%8D%87%E5%AE%9E%E7%8E%B0%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">1.12.4.</span> <span class="toc-text">使用状态提升实现兄弟组件通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-context-%E6%9C%BA%E5%88%B6%E8%B7%A8%E5%B1%82%E7%BA%A7%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">1.12.5.</span> <span class="toc-text">使用 context 机制跨层级组件通信</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-UseEffect%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3"><span class="toc-number">1.13.</span> <span class="toc-text">13. UseEffect概念理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#useEffect-%E4%BE%9D%E8%B5%96%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="toc-number">1.13.1.</span> <span class="toc-text">useEffect 依赖参数说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useEffect-%E6%B8%85%E9%99%A4%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="toc-number">1.13.2.</span> <span class="toc-text">useEffect 清除副作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E8%87%AA%E5%AE%9A%E4%B9%89-Hook-%E5%87%BD%E6%95%B0"><span class="toc-number">1.14.</span> <span class="toc-text">14. 自定义 Hook 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-ReactHooks-%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-number">1.15.</span> <span class="toc-text">15. ReactHooks 使用规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-B-%E7%AB%99%E8%AF%84%E8%AE%BA%E4%BC%98%E5%8C%96"><span class="toc-number">1.16.</span> <span class="toc-text">16. B 站评论优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%8B%9F%E8%AF%B7%E6%B1%82%E8%AF%84%E8%AE%BA%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%8A%BD%E8%B1%A1%E5%87%BA-Hook"><span class="toc-number">1.16.1.</span> <span class="toc-text">模拟请求评论接口，抽象出 Hook</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E8%AF%84%E8%AE%BA%E9%A1%B9-Item-%E7%BB%84%E4%BB%B6"><span class="toc-number">1.16.2.</span> <span class="toc-text">封装评论项 Item 组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-Redux-%E9%9B%86%E4%B8%AD%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">1.17.</span> <span class="toc-text">17. Redux 集中状态管理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Redux-%E4%B8%8E-React%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">1.17.1.</span> <span class="toc-text">Redux 与 React环境准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-React-Toolkit-%E5%88%9B%E5%BB%BA-counterStore"><span class="toc-number">1.17.2.</span> <span class="toc-text">使用 React Toolkit 创建 counterStore</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redux-%E5%BC%82%E6%AD%A5%E7%8A%B6%E6%80%81%E6%93%8D%E4%BD%9C"><span class="toc-number">1.17.3.</span> <span class="toc-text">Redux 异步状态操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-React-Router-%E8%B7%AF%E7%94%B1"><span class="toc-number">1.18.</span> <span class="toc-text">18. React Router 路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E6%89%8B-demo"><span class="toc-number">1.18.1.</span> <span class="toc-text">上手 demo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84-router-%E9%85%8D%E7%BD%AE"><span class="toc-number">1.18.2.</span> <span class="toc-text">实际开发中的 router 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA"><span class="toc-number">1.18.3.</span> <span class="toc-text">路由导航</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">1.18.3.1.</span> <span class="toc-text">声明式导航</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">1.18.3.2.</span> <span class="toc-text">编程式导航</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82"><span class="toc-number">1.18.4.</span> <span class="toc-text">路由传参</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#searchParams-%E4%BC%A0%E5%8F%82"><span class="toc-number">1.18.4.1.</span> <span class="toc-text">searchParams 传参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#params-%E4%BC%A0%E5%8F%82"><span class="toc-number">1.18.4.2.</span> <span class="toc-text">params 传参</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">1.18.5.</span> <span class="toc-text">嵌套路由配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E4%BA%8C%E7%BA%A7%E8%B7%AF%E7%94%B1%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.18.6.</span> <span class="toc-text">默认二级路由设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#404-%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">1.18.7.</span> <span class="toc-text">404 路由配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.18.8.</span> <span class="toc-text">两种路由模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-%E8%AE%B0%E8%B4%A6%E6%9C%AC"><span class="toc-number">1.19.</span> <span class="toc-text">19. 记账本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">1.19.1.</span> <span class="toc-text">环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%88%AB%E5%90%8D%E8%B7%AF%E5%BE%84"><span class="toc-number">1.19.2.</span> <span class="toc-text">配置别名路径</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-UseReducer"><span class="toc-number">1.20.</span> <span class="toc-text">20. UseReducer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-useMemo"><span class="toc-number">1.21.</span> <span class="toc-text">21. useMemo</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/09/22/JVM-%E9%9D%A2%E8%AF%95%E9%A2%98/" title="JVM 面试题"><img src="/img/post_1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM 面试题"></a><div class="content"><a class="title" href="/2024/09/22/JVM-%E9%9D%A2%E8%AF%95%E9%A2%98/" title="JVM 面试题">JVM 面试题</a><time datetime="2024-09-22T14:42:32.000Z" title="发表于 2024-09-22 22:42:32">2024-09-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/21/JUC-%E9%9D%A2%E8%AF%95%E9%A2%98/" title="JUC 面试题"><img src="/img/post_1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JUC 面试题"></a><div class="content"><a class="title" href="/2024/09/21/JUC-%E9%9D%A2%E8%AF%95%E9%A2%98/" title="JUC 面试题">JUC 面试题</a><time datetime="2024-09-21T14:02:31.000Z" title="发表于 2024-09-21 22:02:31">2024-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/06/%E9%9D%A2%E8%AF%95%E7%8B%97-interviewdog-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/" title="面试狗 - interviewdog 项目笔记"><img src="/img/post_2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试狗 - interviewdog 项目笔记"></a><div class="content"><a class="title" href="/2024/09/06/%E9%9D%A2%E8%AF%95%E7%8B%97-interviewdog-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/" title="面试狗 - interviewdog 项目笔记">面试狗 - interviewdog 项目笔记</a><time datetime="2024-09-06T15:49:00.000Z" title="发表于 2024-09-06 23:49:00">2024-09-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/12/Redisson-%E8%AF%A6%E7%BB%86%E4%BD%BF%E7%94%A8/" title="Redisson 详细使用"><img src="/img/post_1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redisson 详细使用"></a><div class="content"><a class="title" href="/2024/08/12/Redisson-%E8%AF%A6%E7%BB%86%E4%BD%BF%E7%94%A8/" title="Redisson 详细使用">Redisson 详细使用</a><time datetime="2024-08-12T15:06:31.000Z" title="发表于 2024-08-12 23:06:31">2024-08-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/29/%E6%89%8B%E6%91%B8%E6%89%8B%E6%95%99%E4%BD%A0%E5%89%8D%E7%AB%AF%E5%92%8C%E5%90%8E%E7%AB%AF%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%AF%BC%E5%87%BA-Excel-%E7%9A%84%EF%BC%9F/" title="手摸手教你前端和后端是如何实现导出 Excel 的？"><img src="/img/post_2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="手摸手教你前端和后端是如何实现导出 Excel 的？"></a><div class="content"><a class="title" href="/2024/07/29/%E6%89%8B%E6%91%B8%E6%89%8B%E6%95%99%E4%BD%A0%E5%89%8D%E7%AB%AF%E5%92%8C%E5%90%8E%E7%AB%AF%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%AF%BC%E5%87%BA-Excel-%E7%9A%84%EF%BC%9F/" title="手摸手教你前端和后端是如何实现导出 Excel 的？">手摸手教你前端和后端是如何实现导出 Excel 的？</a><time datetime="2024-07-29T14:59:29.000Z" title="发表于 2024-07-29 22:59:29">2024-07-29</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">©2020 - 2024 By 雪荷</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'uTxTLDSTgec4bcmjQMhzZLXJ-gzGzoHsz',
      appKey: 'Mj7im3r78jFLJCaSKJKqGj7m',
      avatar: 'monsterid',
      serverURLs: 'https://utxtldst.lc-cn-n1-shared.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, ))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script></div><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>